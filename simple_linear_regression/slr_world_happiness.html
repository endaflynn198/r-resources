<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Enda Flynn">
<meta name="dcterms.date" content="2024-07-29">

<title>SLR - World Happiness Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="slr_world_happiness_files/libs/clipboard/clipboard.min.js"></script>
<script src="slr_world_happiness_files/libs/quarto-html/quarto.js"></script>
<script src="slr_world_happiness_files/libs/quarto-html/popper.min.js"></script>
<script src="slr_world_happiness_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="slr_world_happiness_files/libs/quarto-html/anchor.min.js"></script>
<link href="slr_world_happiness_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="slr_world_happiness_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="slr_world_happiness_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="slr_world_happiness_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="slr_world_happiness_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="slr_world_happiness_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="slr_world_happiness_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">

<script src="slr_world_happiness_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="slr_world_happiness_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="slr_world_happiness_files/libs/datatables-binding-0.22/datatables.js"></script>
<script src="slr_world_happiness_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="slr_world_happiness_files/libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="slr_world_happiness_files/libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="slr_world_happiness_files/libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="slr_world_happiness_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="slr_world_happiness_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="#comparing-sub-saharan-africa-and-western-europe" id="toc-comparing-sub-saharan-africa-and-western-europe" class="nav-link" data-scroll-target="#comparing-sub-saharan-africa-and-western-europe">Comparing Sub-Saharan Africa and Western Europe</a>
  <ul class="collapse">
  <li><a href="#detailed-observations" id="toc-detailed-observations" class="nav-link" data-scroll-target="#detailed-observations">Detailed Observations</a></li>
  </ul></li>
  <li><a href="#analysing-perceptions-of-corruption-by-region" id="toc-analysing-perceptions-of-corruption-by-region" class="nav-link" data-scroll-target="#analysing-perceptions-of-corruption-by-region">Analysing Perceptions of Corruption by Region</a></li>
  <li><a href="#using-the-correlation-and-pairs-plot-to-examine-the-relationships-of-the-variables" id="toc-using-the-correlation-and-pairs-plot-to-examine-the-relationships-of-the-variables" class="nav-link" data-scroll-target="#using-the-correlation-and-pairs-plot-to-examine-the-relationships-of-the-variables">Using the Correlation and Pairs Plot to Examine the Relationships of the Variables</a>
  <ul class="collapse">
  <li><a href="#neater-option" id="toc-neater-option" class="nav-link" data-scroll-target="#neater-option">Neater Option</a></li>
  </ul></li>
  <li><a href="#which-predictor-variable-for-happiness-score-as-response-variable" id="toc-which-predictor-variable-for-happiness-score-as-response-variable" class="nav-link" data-scroll-target="#which-predictor-variable-for-happiness-score-as-response-variable">Which Predictor Variable for Happiness Score as Response Variable?</a></li>
  </ul></li>
  <li><a href="#regression-modelling" id="toc-regression-modelling" class="nav-link" data-scroll-target="#regression-modelling">Regression Modelling</a>
  <ul class="collapse">
  <li><a href="#fitting-a-simple-linear-regression-model" id="toc-fitting-a-simple-linear-regression-model" class="nav-link" data-scroll-target="#fitting-a-simple-linear-regression-model">Fitting a simple linear regression model</a>
  <ul class="collapse">
  <li><a href="#interpreting-the-estimates-of-intercept-and-slope-terms" id="toc-interpreting-the-estimates-of-intercept-and-slope-terms" class="nav-link" data-scroll-target="#interpreting-the-estimates-of-intercept-and-slope-terms">Interpreting the estimates of intercept and slope terms</a></li>
  </ul></li>
  <li><a href="#calculate-and-interpret-the-95-confidence-intervals-for-β0-and-β1." id="toc-calculate-and-interpret-the-95-confidence-intervals-for-β0-and-β1." class="nav-link" data-scroll-target="#calculate-and-interpret-the-95-confidence-intervals-for-β0-and-β1.">Calculate and interpret the 95% confidence intervals for β0 and β1.</a></li>
  <li><a href="#hypothesis-testing" id="toc-hypothesis-testing" class="nav-link" data-scroll-target="#hypothesis-testing">Hypothesis Testing</a>
  <ul class="collapse">
  <li><a href="#compute-and-interpret-the-hypothesis-test-h0-β0-0-vs-ha-β0-0." id="toc-compute-and-interpret-the-hypothesis-test-h0-β0-0-vs-ha-β0-0." class="nav-link" data-scroll-target="#compute-and-interpret-the-hypothesis-test-h0-β0-0-vs-ha-β0-0.">Compute and interpret the hypothesis test H0: β0 = 0 vs Ha: β0 ̸= 0.</a></li>
  <li><a href="#compute-and-interpret-the-hypothesis-test-h0-β1-0-vs-ha-β1-0." id="toc-compute-and-interpret-the-hypothesis-test-h0-β1-0-vs-ha-β1-0." class="nav-link" data-scroll-target="#compute-and-interpret-the-hypothesis-test-h0-β1-0-vs-ha-β1-0.">Compute and interpret the hypothesis test H0 : β1 = 0 vs Ha : β1 != 0.</a></li>
  <li><a href="#interpreting-the-f-statistic" id="toc-interpreting-the-f-statistic" class="nav-link" data-scroll-target="#interpreting-the-f-statistic">Interpreting the F-statistic</a></li>
  </ul></li>
  <li><a href="#the-r-squared-value" id="toc-the-r-squared-value" class="nav-link" data-scroll-target="#the-r-squared-value">The R-squared value</a></li>
  <li><a href="#residual-standard-error-rse" id="toc-residual-standard-error-rse" class="nav-link" data-scroll-target="#residual-standard-error-rse">Residual Standard Error (RSE)</a></li>
  <li><a href="#comments-on-the-shape-of-the-95-confidence-intervals-for-the-estimated-values-of-y" id="toc-comments-on-the-shape-of-the-95-confidence-intervals-for-the-estimated-values-of-y" class="nav-link" data-scroll-target="#comments-on-the-shape-of-the-95-confidence-intervals-for-the-estimated-values-of-y">Comments on the shape of the 95% confidence intervals for the estimated values of Y</a></li>
  <li><a href="#comments-on-the-shape-of-the-95-prediction-intervals-for-the-estimated-values-of-y-corresponding-to-the-x-values-in-the-model" id="toc-comments-on-the-shape-of-the-95-prediction-intervals-for-the-estimated-values-of-y-corresponding-to-the-x-values-in-the-model" class="nav-link" data-scroll-target="#comments-on-the-shape-of-the-95-prediction-intervals-for-the-estimated-values-of-y-corresponding-to-the-x-values-in-the-model">Comments on the Shape of the 95% prediction intervals for the estimated values of Y corresponding to the X values in the model</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">SLR - World Happiness Data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Enda Flynn </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 29, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p><em>Note that you can collapse the code cells by clicking on the code-folding icon in the top right of the code cell.</em></p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The World Happiness Report is an annual study released by the United Nations that investigates individual happiness levels as well as other metrics of well-being. The study provides a happiness score as well as the values of various other indicators for each of the 153 nations.</p>
<p>This is intended to be an exhaustive analysis of the data and the model which will be useful to students and individuals wishing to learn EDA in R or to revise SLR and related concepts. We will begin with an exploratory data analysis to understand the data and the relationship between the variables. We will then fit a simple linear regression model to the data and interpret the results.</p>
</section>
<section id="exploratory-data-analysis" class="level1">
<h1>Exploratory Data Analysis</h1>
<p>We can inspect the data in the interactive table below. This will allow us to get a sense of the data and the variables we are working with.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">"data/world_happiness_data.csv"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(df, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-986f6ae9d0a9ae85f05f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-986f6ae9d0a9ae85f05f">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153"],["Finland","Denmark","Switzerland","Iceland","Norway","Netherlands","Sweden","NewZealand","Austria","Luxembourg","Canada","Australia","UnitedKingdom","Israel","CostaRica","Ireland","Germany","UnitedStates","CzechRepublic","Belgium","UnitedArabEmirates","Malta","France","Mexico","TaiwanProvinceofChina","Uruguay","SaudiArabia","Spain","Guatemala","Italy","Singapore","Brazil","Slovenia","ElSalvador","Kosovo","Panama","Slovakia","Uzbekistan","Chile","Bahrain","Lithuania","TrinidadandTobago","Poland","Colombia","Cyprus","Nicaragua","Romania","Kuwait","Mauritius","Kazakhstan","Estonia","Philippines","Hungary","Thailand","Argentina","Honduras","Latvia","Ecuador","Portugal","Jamaica","SouthKorea","Japan","Peru","Serbia","Bolivia","Pakistan","Paraguay","DominicanRepublic","BosniaandHerzegovina","Moldova","Tajikistan","Montenegro","Russia","Kyrgyzstan","Belarus","NorthCyprus","Greece","HongKong","Croatia","Libya","Mongolia","Malaysia","Vietnam","Indonesia","IvoryCoast","Benin","Maldives","Congo(Brazzaville)","Azerbaijan","Macedonia","Ghana","Nepal","Turkey","China","Turkmenistan","Bulgaria","Morocco","Cameroon","Venezuela","Algeria","Senegal","Guinea","Niger","Laos","Albania","Cambodia","Bangladesh","Gabon","SouthAfrica","Iraq","Lebanon","BurkinaFaso","Gambia","Mali","Nigeria","Armenia","Georgia","Iran","Jordan","Mozambique","Kenya","Namibia","Ukraine","Liberia","PalestinianTerritories","Uganda","Chad","Tunisia","Mauritania","SriLanka","Congo(Kinshasa)","Swaziland","Myanmar","Comoros","Togo","Ethiopia","Madagascar","Egypt","SierraLeone","Burundi","Zambia","Haiti","Lesotho","India","Malawi","Yemen","Botswana","Tanzania","CentralAfricanRepublic","Rwanda","Zimbabwe","SouthSudan","Afghanistan"],["Western Europe","Western Europe","Western Europe","Western Europe","Western Europe","Western Europe","Western Europe","North America and ANZ","Western Europe","Western Europe","North America and ANZ","North America and ANZ","Western Europe","Middle East and North Africa","Latin America and Caribbean","Western Europe","Western Europe","North America and ANZ","Central and Eastern Europe","Western Europe","Middle East and North Africa","Western Europe","Western Europe","Latin America and Caribbean","East Asia","Latin America and Caribbean","Middle East and North Africa","Western Europe","Latin America and Caribbean","Western Europe","Southeast Asia","Latin America and Caribbean","Central and Eastern Europe","Latin America and Caribbean","Central and Eastern Europe","Latin America and Caribbean","Central and Eastern Europe","Commonwealth of Independent States","Latin America and Caribbean","Middle East and North Africa","Central and Eastern Europe","Latin America and Caribbean","Central and Eastern Europe","Latin America and Caribbean","Western Europe","Latin America and Caribbean","Central and Eastern Europe","Middle East and North Africa","Sub-Saharan Africa","Commonwealth of Independent States","Central and Eastern Europe","Southeast Asia","Central and Eastern Europe","Southeast Asia","Latin America and Caribbean","Latin America and Caribbean","Central and Eastern Europe","Latin America and Caribbean","Western Europe","Latin America and Caribbean","East Asia","East Asia","Latin America and Caribbean","Central and Eastern Europe","Latin America and Caribbean","South Asia","Latin America and Caribbean","Latin America and Caribbean","Central and Eastern Europe","Commonwealth of Independent States","Commonwealth of Independent States","Central and Eastern Europe","Commonwealth of Independent States","Commonwealth of Independent States","Commonwealth of Independent States","Western Europe","Western Europe","East Asia","Central and Eastern Europe","Middle East and North Africa","East Asia","Southeast Asia","Southeast Asia","Southeast Asia","Sub-Saharan Africa","Sub-Saharan Africa","South Asia","Sub-Saharan Africa","Commonwealth of Independent States","Central and Eastern Europe","Sub-Saharan Africa","South Asia","Middle East and North Africa","East Asia","Commonwealth of Independent States","Central and Eastern Europe","Middle East and North Africa","Sub-Saharan Africa","Latin America and Caribbean","Middle East and North Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Southeast Asia","Central and Eastern Europe","Southeast Asia","South Asia","Sub-Saharan Africa","Sub-Saharan Africa","Middle East and North Africa","Middle East and North Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Commonwealth of Independent States","Commonwealth of Independent States","Middle East and North Africa","Middle East and North Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Commonwealth of Independent States","Sub-Saharan Africa","Middle East and North Africa","Sub-Saharan Africa","Sub-Saharan Africa","Middle East and North Africa","Sub-Saharan Africa","South Asia","Sub-Saharan Africa","Sub-Saharan Africa","Southeast Asia","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Middle East and North Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Latin America and Caribbean","Sub-Saharan Africa","South Asia","Sub-Saharan Africa","Middle East and North Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","Sub-Saharan Africa","South Asia"],[7.8087000846863,7.6455998420715,7.5598998069763,7.504499912262,7.4879999160767,7.4489002227783,7.3534998893738,7.2996001243591,7.2941999435425,7.2375001907349,7.2321000099182,7.2227997779846,7.1645002365112,7.1286001205444,7.1213998794556,7.0936999320984,7.0757999420166,6.9395999908447,6.9109001159668,6.8635001182556,6.7908000946045,6.7727999687195,6.6637997627258,6.4650001525879,6.4553999900818,6.4401001930237,6.4064998626709,6.400899887085,6.3989000320435,6.3874001502991,6.3770999908447,6.375599861145,6.3633999824524,6.3482999801636,6.3252000808716,6.3048000335693,6.2806000709534,6.2575998306274,6.2284998893738,6.2273001670837,6.2154998779297,6.1918997764587,6.1862998008728,6.1634001731873,6.1589999198914,6.1371002197266,6.1237001419067,6.1020998954773,6.1012997627258,6.0578999519348,6.0218000411987,6.0060000419617,6.0004000663757,5.9987998008728,5.9746999740601,5.9531998634338,5.9499998092651,5.9251999855042,5.9109001159668,5.8898000717163,5.8723998069763,5.8708000183106,5.7968001365662,5.7782001495361,5.7474999427795,5.6932997703552,5.6921000480652,5.689199924469,5.6740999221802,5.607500076294,5.5556998252869,5.5461001396179,5.5460000038147,5.5415000915527,5.5398998260498,5.5355000495911,5.5149998664856,5.5103998184204,5.5047001838684,5.4888000488281,5.4562001228333,5.3843002319336,5.3534998893738,5.2856001853943,5.2333002090454,5.2160000801086,5.1975998878479,5.1943998336792,5.1648001670837,5.1598000526428,5.1479997634888,5.1371998786926,5.1318001747131,5.123899936676,5.1191000938416,5.1015000343323,5.0947999954224,5.0848999023438,5.0531997680664,5.005099773407,4.980800151825,4.9492998123169,4.9095997810364,4.8885998725891,4.8826999664307,4.8484001159668,4.832799911499,4.8292999267578,4.8140997886658,4.7848000526428,4.7715001106262,4.7687001228333,4.750599861145,4.7293000221252,4.724100112915,4.6767997741699,4.6725997924805,4.6723999977112,4.6333999633789,4.6236000061035,4.5830001831055,4.5711002349854,4.5606999397278,4.5578999519348,4.5528001785278,4.4320001602173,4.4226999282837,4.3921999931336,4.3745999336243,4.3270001411438,4.3109998703003,4.3081002235413,4.308000087738,4.2885999679565,4.1872000694275,4.1862001419067,4.1655998229981,4.1514000892639,3.9263999462128,3.7753000259399,3.7593998908997,3.7207999229431,3.6528000831604,3.5732998847961,3.5380001068115,3.5274000167847,3.4788999557495,3.4762001037598,3.4758999347687,3.3122999668121,3.2992000579834,2.8166000843048,2.5669000148773],[10.639266967773,10.774001121521,10.979932785034,10.772559165955,11.087803840637,10.812711715698,10.758793830872,10.500943183899,10.742823600769,11.450680732727,10.692368507385,10.720596313477,10.600134849548,10.417525291443,9.6581563949585,11.160978317261,10.732818603516,10.925768852234,10.404163360596,10.673639297485,11.109998703003,10.533838272095,10.584222793579,9.797797203064,10.775685310364,9.9481925964356,10.797812461853,10.462926864624,8.9248056411743,10.48183631897,11.39552116394,9.566434860229499,10.392322540283,8.909075736999499,9.204429626464799,10.034234046936,10.347749710083,8.7403717041016,10.032054901123,10.676380157471,10.343626022339,10.260002136231,10.265124320984,9.500369071960501,10.405702590942,8.493160247802701,10.107583999634,11.089824676514,9.9567861557007,10.114658355713,10.340017318726,8.9935455322266,10.249243736267,9.7417917251587,9.810955047607401,8.4245347976685,10.175319671631,9.2460584640503,10.263742446899,9.0062503814697,10.510566711426,10.579689025879,9.456313133239799,9.6809806823731,8.8511152267456,8.4827270507813,9.3899822235107,9.6648807525635,9.455817222595201,8.7767143249512,8.0248107910156,9.7518606185913,10.128871917725,8.1484050750732,9.779945373535201,10.405702590942,10.132326126099,10.934671401978,10.070875167847,9.78981590271,9.4121866226196,10.262518882752,8.8095455169678,9.3697519302368,8.2255611419678,7.6743197441101,9.518632888794,8.5369873046875,9.687726974487299,9.510591506958001,8.350645065307599,7.9253573417664,10.129419326782,9.6885681152344,9.7480325698853,9.8693189620972,8.9403133392334,8.1186475753784,8.9777936935425,9.5379648208618,8.1189823150635,7.7509903907776,6.8421669006348,8.798580169677701,9.417930603027299,8.249890327453601,8.2870635986328,9.6805372238159,9.4033708572388,9.661095619201699,9.3617238998413,7.468544960022,7.3218145370483,7.6298522949219,8.5766248703003,9.100476264953601,9.2261009216309,9.8137197494507,9.025999069213899,7.0693459510803,8.0297756195068,9.2031412124634,9.0106906890869,7.0543804168701,8.389223098754901,7.5003895759583,7.4679636955261,9.314972877502401,8.2339191436768,9.3899698257446,6.6942563056946,9.1626739501953,8.6804819107056,7.8336300849915,7.357711315155,7.5093855857849,7.2816858291626,9.316541671752899,7.2688031196594,6.4926424026489,8.2247200012207,7.4113292694092,7.960488319397,8.8498239517212,7.0622262954712,7.7596826553345,9.7112035751343,7.9676651954651,6.6251602172852,7.6001043319702,7.8657116889954,7.4253597259522,7.462860584259],[0.9543297290802,0.9559907913208,0.942846596241,0.9746695756912001,0.9524865746498,0.9391388297081,0.9263111948967,0.9491189718246,0.9280458688736,0.9069122076035,0.9271766543388,0.9448546171188,0.9366828203201,0.9135712385178,0.9015459418297,0.9420815706253,0.8988744616508,0.9142190217972,0.9144306778908,0.9116325378418,0.8491811156273,0.9303795099258,0.9371037483215,0.8386654257774,0.8943091034889,0.9228112697601,0.8740670681,0.9211254119873,0.8166214823723,0.8898785710335,0.9102689623833,0.8967238068581,0.9395756721496999,0.8060922622681,0.8207265138626,0.9020944833755,0.9224937558174,0.9265958070755,0.8797135949135,0.8763421177864,0.9261071085930001,0.9152941703796,0.8742574453354,0.8844402432442,0.8059962391852999,0.8574970364571,0.8251615166664,0.8464752435684,0.9103578329086,0.9347448945045,0.9347299933434,0.8467300534248,0.9219341278076,0.8899732232094,0.9005679488182,0.8218701481819,0.9182885885239001,0.8364189863205,0.886590719223,0.9157018661499,0.7993871569633,0.883545935154,0.8310752511024,0.8814757466316,0.8031086921692,0.6890622973442,0.8987278938293,0.8820853829384,0.8292041420937,0.843313574791,0.8352971076965,0.8553146123886,0.9031507372856,0.8872284889221,0.9067474603653,0.8203566074371,0.8143803477287,0.845969080925,0.8746237158775,0.8259429335594,0.9371424913406,0.8165094256401,0.8499871492386,0.8083798885345,0.6580486893654,0.468671143055,0.9131609201431,0.6402280926704,0.8193082809448,0.8203923106194,0.7286010980606,0.7855124473572,0.8263135552406,0.7987605929375,0.9589661955833,0.9378403425217,0.5926284790039,0.7003864049912,0.8904081583023,0.8033851385117,0.7236160039902,0.6375734806061,0.6174350380898,0.7375022172928,0.6710704565048,0.7730806469917,0.6872929930687,0.7878868579865,0.8525322675705,0.7476949691772,0.8243381381035,0.7129436135292,0.6931686997414001,0.731468975544,0.7372168898582,0.757479429245,0.6290330290794,0.6946896910667,0.8021637201309,0.7238740324974,0.7026520371436999,0.8468809723854001,0.8788793683052,0.7092805504799,0.8252959251404,0.7649946212769,0.6323880553246,0.6887185573578,0.7908192276954999,0.8253740668297,0.6721590161324,0.7702901959419,0.7844070196152,0.6256624460220001,0.5513126254082,0.743307352066,0.6681959033012,0.7354478240013,0.6361420154571999,0.4903257191181,0.6988244652748,0.5932478308678,0.7804957032204,0.5922009348869,0.5440073013306,0.8179805874825,0.7791217565537,0.6889331936836,0.3194598555565,0.5408354401588,0.7630927562714001,0.5537071228027,0.4703669548035],[71.900825500488,72.402503967285,74.10244750976599,73,73.20078277587901,72.300918579102,72.60076904296901,73.20262908935599,73.00250244140599,72.59999847412099,73.601600646973,73.604537963867,72.30160522460901,73.20025634765599,71.299850463867,72.300788879395,72.202018737793,68.29949951171901,70.04793548584,72.00164794921901,67.08278656005901,72.199996948242,73.80193328857401,68.299026489258,69.59999847412099,69.002548217773,66.305145263672,74.402709960938,64.808944702148,73.601684570313,76.804580688477,66.48016357421901,71.102989196777,66.108261108398,63.885555267334,69.60301208496099,68.90634155273401,65.10757446289099,69.90061950683599,68.5,67.294075012207,63.5,69.31113433837901,67.699584960938,73.702224731445,67.50717926025401,67.207237243652,66.76764678955099,66.404342651367,64.60996246337901,68.60495758056599,61.926761627197,67.609970092773,67.250595092773,68.80380249023401,67.198768615723,66.80746459960901,68.500038146973,72.40202331543,67.09999847412099,73.602729797363,75.00096893310599,68.100234985352,68.210205078125,63.600471496582,58.253135681152,65.639938354492,65.807487487793,67.808135986328,65.01301574707,64.10459136962901,68.50534820556599,64.100456237793,64.106010437012,66.104331970215,73.702224731445,72.40525817871099,76.77170562744099,70.21490478515599,62.299999237061,62.304485321045,67.102157592773,67.95273590087901,62.155849456787,49.503772735596,54.312465667725,70.59999847412099,57.924480438232,65.50839996337901,67.504425048828,57.203987121582,63.779178619385,66.90281677246099,69.289192199707,62.211708068848,66.80397796630901,65.896240234375,52.704940795898,66.505340576172,65.90517425537099,59.599151611328,54.467800140381,53.500095367432,58.709922790527,68.708137512207,61.529968261719,64.503067016602,59.715339660645,56.506011962891,59.903549194336,67.106582641602,53.88945388794,55.012016296387,51.726982116699,49.861907958984,66.75065612793,64.49520874023401,66.006149291992,66.799751281738,54.205821990967,60.09693145752,56.501487731934,64.60678100585901,56.096313476563,62.25,55.708202362061,48.220539093018,66.89785766601599,57.010177612305,67.200065612793,52.900001525879,51.188236236572,58.961711883545,57.349010467529,54.719898223877,58.639591217041,59.10542678833,61.780151367188,50.865142822266,53.400001525879,55.299377441406,55.598625183106,48.003623962402,60.215187072754,57.592887878418,56.727283477783,58.924453735352,57.496074676514,45.20000076294,61.098846435547,55.617259979248,51,52.590000152588],[0.9491721987724,0.9514442682266,0.9213366508484,0.9488918781281001,0.9557502865791,0.9085478186607,0.9391441941261,0.9362174868584,0.8999894857407,0.9056364297867,0.933913230896,0.9154317378998,0.8347436785698,0.7475805878639,0.9347389340401,0.8869829773903,0.8673710823059,0.8426195383072,0.8185373544693,0.8135820627213,0.941345512867,0.9249114394188001,0.825467646122,0.8587092757225,0.7715303301811,0.8923954367638,0.8541912436485,0.751989543438,0.9081475734711,0.6646519899368,0.9266453385353,0.7998048067093,0.9361426234245001,0.8338052630425,0.8615359067917,0.8803665041924,0.749952673912,0.9749981164932,0.7448962926865,0.9058557748795,0.7473814487457,0.8579071164131,0.8620557785034,0.8361799120903,0.7798582911491,0.8639028668404,0.8428232073784,0.8723664879799,0.8895345330238,0.8116019368172001,0.8777091503143,0.9154634475708,0.7189645767212,0.9050630331039,0.8311324119568,0.8706032633781,0.6712376475334,0.8598289489746,0.8887478113174,0.8580685257912,0.6129651069641,0.8099613785744,0.8247660994529999,0.7264958620071,0.8758733272552,0.7348337173462,0.8859234452248,0.8662027716637,0.6513527035713,0.7216091752052,0.8313834071159,0.6495656371117,0.7298926115036,0.9093748927116,0.6391630768776,0.7952935099602,0.5413451194763,0.7798337936401,0.7148388028145,0.7731570005417,0.693351328373,0.8946268558502,0.9395929574966,0.8706144094467,0.7279093265533,0.7351825833321,0.8539627790451,0.7190585136414001,0.7868241071701,0.7388409376144,0.7947965264320001,0.7975650429726,0.6088304519652999,0.8985179066658,0.8264570236206,0.7451781630516,0.7720724344254,0.7630518078803999,0.6232783198357,0.4666109085083,0.6905961632729,0.7068467736244,0.7597721219062999,0.9072135686874,0.7819942235947001,0.9597046375275,0.9006249904633,0.7048292160034,0.7593300938606,0.6331826448441,0.5513575077057,0.665563583374,0.7331631779671,0.7115661501884,0.7595784068108,0.7120178341866,0.801641523838,0.6478732824326,0.7510477900505,0.8644518852234,0.8297475576401,0.7675209641457,0.6630818843842,0.7352687120438,0.6457918286324,0.731713950634,0.5873052477837,0.59336155653,0.5515225529671,0.8376336693764,0.7007935643196,0.6468222737312,0.8950752019882,0.5476126074791,0.6498286128044,0.7407951951027,0.5575740933418,0.7083541750908,0.7153150439262,0.6263502240181,0.8065002560616,0.5378251671791,0.7381258606911,0.8814448714256,0.8032231926918,0.5999202728271,0.8213281035423,0.8215397596359,0.6408806443214,0.9005894064902999,0.7114579081535,0.4513136148453,0.3965730071068],[-0.059482019395,0.06620177626609999,0.105911038816,0.246944218874,0.1345326304436,0.20761243999,0.1116146221757,0.191598072648,0.08542922139170001,-0.004620587919,0.1247707679868,0.1904601603746,0.2637324929237,0.1025937199593,-0.102429710329,0.1457849740982,0.08017938584089999,0.1498917341232,-0.230861514807,-0.07869119942199999,0.12345084548,0.2149658054113,-0.130641967058,-0.175266623497,-0.07319869846099999,-0.101103112102,-0.168695062399,-0.050961714238,-0.042938664556,-0.043460998684,0.0298792235553,-0.101812392473,-0.080603383482,-0.121072977781,0.1909337639809,-0.153927713633,-0.124409303069,0.2484271526337,-0.065668366849,0.1337291896343,-0.219725295901,0.0005268406821,-0.205084070563,-0.161235645413,0.043731495738,0.0209591407329,-0.197815209627,-0.100184701383,-0.018318573013,-0.06848863512300001,-0.111697770655,-0.105463005602,-0.194323018193,0.2686851918697,-0.194913864136,0.08696911484,-0.186888843775,-0.127014964819,-0.220714300871,-0.12510676682,-0.043404031545,-0.246910348535,-0.162388220429,-0.073676221073,-0.09168113023,0.0448998697102,0.0079977130517,-0.131263285875,0.0982745587826,-0.037741038948,-0.025088511407,-0.075600355864,-0.151153743267,0.1547720581293,-0.164926543832,0.0002271585254,-0.300907373428,0.134979903698,-0.128538325429,-0.08505448699,0.09809386730190001,0.1147267967463,-0.094533331692,0.5195865035057,-0.043991155922,-0.003537212731,0.0380854979157,-0.123674094677,-0.240255281329,-0.019877450541,0.0941708534956,0.1541688293219,-0.171046435833,-0.181425750256,0.1876715421677,-0.143908441067,-0.240377247334,-0.001496450393,-0.169090509415,-0.121105164289,-0.052335154265,0.076328471303,0.0138608170673,0.1113714799285,-0.042309489101,0.0519111789763,-0.033664725721,-0.222261622548,-0.109777323902,-0.069564759731,-0.061215270311,-0.019080515951,0.3431987166405,-0.044366925955,0.0337458066642,-0.138779610395,-0.22892037034,0.1178911030293,-0.162565201521,0.0323758684099,0.2946815192699,-0.185306459665,-0.03093370609,0.0422732196748,-0.16207909584,0.0994874313474,0.0178347192705,-0.216413810849,-0.106008142233,0.0811296179891,0.0836376547813,-0.19920141995,0.560663998127,0.0900084078312,0.0026678745635,0.0433773323894,-0.011823639274,-0.196878314018,0.08866074681280001,-0.017551597208,0.0780371278524,0.4005345702171,-0.145732045174,0.0575516074896,0.0214332789183,-0.157735437155,-0.250394493341,0.109668686986,0.08241035789249999,0.0554839521647,-0.072063952684,0.016518548131,-0.096429400146],[0.1954445838928,0.1684894561768,0.3037284314632,0.7117097377777,0.2632181942463,0.3647171258926,0.2508801817894,0.2211388498545,0.4999548792839,0.3670842945576,0.3908433616161,0.4151691198349,0.4359159171581,0.7808550596237001,0.7863324284554,0.3571841716766,0.4564220309258,0.6997153162956,0.8584462404251,0.6122979521751,0.5945022106171,0.6585472822189,0.5835211277008,0.8068215847015,0.7318829298019,0.6359941363335,0.6826195120811001,0.7658599019051,0.7832374572754,0.8734046816826,0.109784193337,0.770601272583,0.8170710206032,0.7543199062347,0.9223282933235,0.8515889048576,0.9180961251259,0.501497387886,0.8382394313812001,0.7393471002579,0.8095838427544,0.9122306108475,0.6869270205498,0.8645718097687,0.8562717437744,0.6659501194954,0.9343002438544999,0.7608490586281,0.8053430914879,0.7644908428192,0.6230738162994,0.7336341142654,0.8929165005684,0.8862723112106,0.8420098423958,0.8011319041252,0.7955800890923,0.8012151122093,0.8926295042038001,0.8888900279999,0.7890674471855,0.6545580625534,0.8937149643898,0.8435090184212,0.8226062059402,0.7457054257393,0.8347885012627,0.7559999227524,0.9337691068649,0.9133142828941,0.5920760631561,0.7831215858459,0.8648025989532,0.8883960843086,0.6357116699219,0.6261156797409,0.859931409359,0.4206072092056,0.9164952635765,0.6687791347504,0.8635112047195,0.8393023014069,0.7964212298393,0.8762964010239001,0.7907719612121999,0.7405325770378,0.8242110610008,0.7517790794373,0.552537560463,0.8974905014038,0.8479647636414001,0.7380991578102,0.7481973767281,0.7539710998535,0.8836918473244,0.9355851411818999,0.8157246112823,0.8513365983963,0.837038397789,0.7354851365089,0.8087851405144,0.7617944478989001,0.7225301861763,0.6346793174744,0.8963037133217,0.8227690458298,0.6618435382843,0.8491509556770001,0.8434238433838001,0.8222618103027,0.9022562503815,0.7397950291634,0.6907178163528001,0.8393284082413,0.8618743419647,0.7735447883606,0.6659446954727,0.7146359682083,0.7003443241119,0.6830191016197,0.8314991593361,0.8514497876167,0.9206367135048,0.8563759326935,0.8241999745369,0.8367378115653999,0.8027608394623,0.8675902485847,0.7462235093117,0.8590017557144,0.8094035983086,0.7082633376122,0.6451243162155,0.7806226015091,0.757733464241,0.7536900043488,0.8174856305122,0.7877268791199,0.8613306879997,0.6069345474243,0.8012896776199,0.6847672462463,0.8573920726776,0.7720426917076,0.7317007780075,0.8002877235413,0.7779309153557,0.6197994351387,0.8918066620827,0.1835411787033,0.8102369904518,0.7634173035621999,0.9336865544319]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country<\/th>\n      <th>Region<\/th>\n      <th>Happiness_score<\/th>\n      <th>Log_GDP_Per_Capita<\/th>\n      <th>Social_support<\/th>\n      <th>Healthy_life_expectancy<\/th>\n      <th>Freedom_to_make_life_choices<\/th>\n      <th>Generosity<\/th>\n      <th>Perceptions_of_corruption<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="comparing-sub-saharan-africa-and-western-europe" class="level2">
<h2 class="anchored" data-anchor-id="comparing-sub-saharan-africa-and-western-europe">Comparing Sub-Saharan Africa and Western Europe</h2>
<p>Check unique regions:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>Region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Western Europe"                     "North America and ANZ"             
 [3] "Middle East and North Africa"       "Latin America and Caribbean"       
 [5] "Central and Eastern Europe"         "East Asia"                         
 [7] "Southeast Asia"                     "Commonwealth of Independent States"
 [9] "Sub-Saharan Africa"                 "South Asia"                        </code></pre>
</div>
</div>
<p>Put “Sub-Saharan Africa” and “Western Europe” into their own dataframes for tidy boxplots:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ssa_df <span class="ot">=</span> df[(df<span class="sc">$</span>Region<span class="sc">==</span><span class="st">'Sub-Saharan Africa'</span>),]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>we_df <span class="ot">=</span>  df[(df<span class="sc">$</span>Region<span class="sc">==</span><span class="st">'Western Europe'</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Make boxplots and density plots:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(ssa_df<span class="sc">$</span>Happiness_score, <span class="at">main=</span><span class="st">'Happiness Score Sub-Saharan Africa'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(we_df<span class="sc">$</span>Happiness_score, <span class="at">main=</span><span class="st">'Happiness Score West Europe'</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(ssa_df<span class="sc">$</span>Happiness_score), <span class="at">main=</span><span class="st">'Happiness Score Sub-Saharan Africa'</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">polygon</span>(<span class="fu">density</span>(ssa_df<span class="sc">$</span>Happiness_score), <span class="at">col=</span><span class="st">'red'</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(we_df<span class="sc">$</span>Happiness_score), <span class="at">main=</span><span class="st">'Happiness Score West Europe'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">polygon</span>(<span class="fu">density</span>(we_df<span class="sc">$</span>Happiness_score), <span class="at">col=</span><span class="st">'red'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="slr_world_happiness_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Further information on the happiness scores for sub-Saharan Africa and Western Europe respectively:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ssa_df<span class="sc">$</span>Happiness_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  2.817   3.851   4.432   4.383   4.822   6.101 </code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(we_df<span class="sc">$</span>Happiness_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  5.515   6.401   7.094   6.899   7.449   7.809 </code></pre>
</div>
</div>
<section id="detailed-observations" class="level3">
<h3 class="anchored" data-anchor-id="detailed-observations">Detailed Observations</h3>
<p>From the boxplots, density plots and the summary statistics, we observe a notable difference in the happiness scores of people from Sub-Saharan Africa and Western Europe. Some additional noteworthy observations are that:</p>
<ul>
<li><p>The median happiness score for Western Europe is 7.094 compared to 4.432 for Sub-Saharan Africa.</p></li>
<li><p>The minimum happiness score for Western Europe is 5.515 compared to 2.817 for Sub-Saharan Africa.</p></li>
<li><p>The maximum happiness score for Western Europe is 7.809 compared to 6.601 for Sub-Saharan Africa.</p></li>
<li><p>The 25th-percentile happiness score of 6.401 for WE is greater than the maximum score for SSA.</p></li>
<li><p>For both Western Europe and Sub-Saharan Africa the mean values are less than the median - this is something we expected from observing the density plots and noticing that they are both left-skewed. From visual inspection of the density plot, the Western Europe distribution is more left skewed and this is reflected in the greater difference between it’s mean and median compared to Sub-Saharan Africa.</p>
<ul>
<li>Despite this, it’s worth noting that SSA has some degree of right skew also - this indicates that there are some countries in SSA with higher happiness scores than the majority.</li>
</ul></li>
<li><p>There are 39 observations for SSA compared to 21 for WE.</p></li>
<li><p>Looking at the boxplots, we similarly observe that the distribution for WE is higher overall and more left-skewed than SSA as the lower ‘whisker’ is longer than the upper. There are no outliers.</p></li>
</ul>
<p>We can augment out summary statistics by quantifying the variance in the scores using:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(ssa_df<span class="sc">$</span>Happiness_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4665587</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(we_df<span class="sc">$</span>Happiness_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.466778</code></pre>
</div>
</div>
<p>And getting the IQR using:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(ssa_df<span class="sc">$</span>Happiness_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9708499</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(we_df<span class="sc">$</span>Happiness_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.048</code></pre>
</div>
</div>
<p>These measures of variance are fairly similar for SSA and WE.</p>
</section>
</section>
<section id="analysing-perceptions-of-corruption-by-region" class="level2">
<h2 class="anchored" data-anchor-id="analysing-perceptions-of-corruption-by-region">Analysing Perceptions of Corruption by Region</h2>
<p>The boxplots show that the perceptions of corruption per region are surprisingly similar. We can distinguish two sets of countries based on this analysis:</p>
<ul>
<li><p>Those with a relatively lower score: “North America and ANZ” and “Western Europe.”</p></li>
<li><p>Those with a relatively high score: the remaining regions.</p></li>
</ul>
<p>Answers to other questions:</p>
<ul>
<li>The region with the highest variability in the perceptions of corruption is Western Europe.</li>
<li>The region with the highest median value for the variability in perceptions of corruption is Central and Eastern Europe.</li>
<li>The region with the lowest recorded score for perceptions of corruption is Southeast Asia - this value is an outlier.</li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use ggplot2 to rotate labels...</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> Region, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> Perceptions_of_corruption,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> Region)) <span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="slr_world_happiness_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="using-the-correlation-and-pairs-plot-to-examine-the-relationships-of-the-variables" class="level2">
<h2 class="anchored" data-anchor-id="using-the-correlation-and-pairs-plot-to-examine-the-relationships-of-the-variables">Using the Correlation and Pairs Plot to Examine the Relationships of the Variables</h2>
<p>Happiness score and Log_GDP_Per_Capita:</p>
<ul>
<li>In the pairs plot we observe a strong linear relationship between these two variables which is evidenced by the positive correlation of 0.7754. This is the highest correlation with happiness score among the numeric variables.</li>
</ul>
<p>Happiness score and Social_support:</p>
<ul>
<li>In the pairs plot we observe a strong linear relationship between these two variables which is evidenced by the positive correlation of 0.765 This is the third highest correlation with happiness score among the numeric variables.</li>
</ul>
<p>Happiness score and Healthy_life_expectancy:</p>
<ul>
<li>In the pairs plot we observe a strong linear relationship between these two variables which is evidenced by the positive correlation of 0.770. This is the second highest correlation with happiness score among the numeric variables.</li>
</ul>
<p>Happiness score and Freedom_to_make_life_choices:</p>
<ul>
<li>In the pairs plot we observe a weaker linear relationship between these two variables which is evidenced by the positive correlation of 0.5906. This is the fourth highest correlation with happiness score among the numeric variables.</li>
</ul>
<p>Happiness score and Generosity:</p>
<ul>
<li>In the pairs plot we do not observe a clear linear relationship between these two variables which is evidenced by the low correlation of 0.069. This is the fifth highest correlation with happiness score among the numeric variables.</li>
</ul>
<p>Happiness score and Perceptions_of_corruption:</p>
<ul>
<li>In the pairs plot we do not observe a slight negative linear relationship between these two variables which is also reflected in the negative correlation of -0.4183. This is the only negative correlation with happiness score among the numeric variables.</li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get numeric columns</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>nums <span class="ot">=</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(df, is.numeric), <span class="at">use.names =</span> <span class="cn">FALSE</span>)  </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>pairs_df <span class="ot">=</span> df[, nums]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(pairs_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="slr_world_happiness_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(pairs_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                             Happiness_score Log_GDP_Per_Capita Social_support
Happiness_score                   1.00000000          0.7753744     0.76500076
Log_GDP_Per_Capita                0.77537440          1.0000000     0.78181358
Social_support                    0.76500076          0.7818136     1.00000000
Healthy_life_expectancy           0.77031629          0.8484686     0.74274409
Freedom_to_make_life_choices      0.59059678          0.4190186     0.47886318
Generosity                        0.06904313         -0.1183994    -0.05678035
Perceptions_of_corruption        -0.41830509         -0.3347291    -0.21052960
                             Healthy_life_expectancy
Happiness_score                           0.77031629
Log_GDP_Per_Capita                        0.84846862
Social_support                            0.74274409
Healthy_life_expectancy                   1.00000000
Freedom_to_make_life_choices              0.44884619
Generosity                               -0.07185211
Perceptions_of_corruption                -0.35384121
                             Freedom_to_make_life_choices  Generosity
Happiness_score                                 0.5905968  0.06904313
Log_GDP_Per_Capita                              0.4190186 -0.11839937
Social_support                                  0.4788632 -0.05678035
Healthy_life_expectancy                         0.4488462 -0.07185211
Freedom_to_make_life_choices                    1.0000000  0.25372112
Generosity                                      0.2537211  1.00000000
Perceptions_of_corruption                      -0.4201445 -0.27848023
                             Perceptions_of_corruption
Happiness_score                             -0.4183051
Log_GDP_Per_Capita                          -0.3347291
Social_support                              -0.2105296
Healthy_life_expectancy                     -0.3538412
Freedom_to_make_life_choices                -0.4201445
Generosity                                  -0.2784802
Perceptions_of_corruption                    1.0000000</code></pre>
</div>
</div>
<section id="neater-option" class="level3">
<h3 class="anchored" data-anchor-id="neater-option">Neater Option</h3>
<p>Note that we can also use the <code>corrplot</code> package to visualise the correlation matrix for a neater output:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(pairs_df)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># visualise the correlation matrix</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">heatmap</span>(cor_matrix, <span class="at">col =</span> <span class="fu">colorRampPalette</span>(<span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"white"</span>, <span class="st">"red"</span>))(<span class="dv">100</span>), </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">symm =</span> <span class="cn">TRUE</span>, <span class="at">margins =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="slr_world_happiness_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="which-predictor-variable-for-happiness-score-as-response-variable" class="level2">
<h2 class="anchored" data-anchor-id="which-predictor-variable-for-happiness-score-as-response-variable">Which Predictor Variable for Happiness Score as Response Variable?</h2>
<p>Based on the results so far, I would expect the Log_GDP_Per_Capita to be a better predictor variable in a regression model than Freedom_to_make_life_choices. The reason I select this is because:</p>
<ul>
<li>The correlation for Log_GDP_Per_Capita and the Happiness_score is 0.775 compared to 0.591 for Freedom_to_make_life_choices and the Happiness_score which indicates a much stronger linear relationship.</li>
<li>From observation of the pairs plot we observe less variability in the relationship between Log_GDP_Per_Capita and the Happiness_score compared to Freedom_to_make_life_choices and the Happiness_score.</li>
</ul>
</section>
</section>
<section id="regression-modelling" class="level1">
<h1>Regression Modelling</h1>
<section id="fitting-a-simple-linear-regression-model" class="level2">
<h2 class="anchored" data-anchor-id="fitting-a-simple-linear-regression-model">Fitting a simple linear regression model</h2>
<p>The mathematical statement of the simple linear regression model is given by <span class="math display">\[
Y_i = \beta_0 + \beta_1X_i + \epsilon_i,\quad i =1, ..., n,
\]</span></p>
<p>where <span class="math inline">\(\beta_0\)</span>, <span class="math inline">\(\beta_1\)</span> are parameters for the intercept and slope of the model respectively - these are fixed, unknown constants which we estimate with the statistics <span class="math inline">\(\hat{\beta_0}\)</span> and <span class="math inline">\(\hat{\beta_1}\)</span>. The remaining values <span class="math inline">\(Y_i, X_i\)</span> and <span class="math inline">\(\epsilon_i\)</span> are the values of the dependent/response variable, the independent/predictor variable, and the error for observation <span class="math inline">\(i.\)</span></p>
<p>The predictions of our model will be given by <span class="math display">\[
\hat{Y_i} = \hat{\beta_0} + \hat{\beta_1}X_i,\quad i =1, ..., n,
\]</span> where:</p>
<ul>
<li><p><span class="math inline">\(\hat{Y_i}\)</span> is the predicted Happiness_score for observation <span class="math inline">\(i\)</span>.</p></li>
<li><p><span class="math inline">\(\hat{\beta_0}\)</span> is the estimated intercept term - it is the model’s predicted happiness score when <span class="math inline">\(X=0\)</span> (i.e., the value of the dependent variable when the independent variable is 0).</p></li>
<li><p><span class="math inline">\(\hat{\beta_1}\)</span> is the slope of the regression line - in our model it is the predicted increase in the happiness score for a one unit increase in Log_GDP_Per_Capita.</p></li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">=</span> <span class="fu">lm</span>(Happiness_score <span class="sc">~</span> Log_GDP_Per_Capita, <span class="at">data=</span>df)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Happiness_score ~ Log_GDP_Per_Capita, data = df)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.29256 -0.52524  0.02843  0.57109  1.38802 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        -1.19865    0.44586  -2.688  0.00799 ** 
Log_GDP_Per_Capita  0.71774    0.04757  15.088  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.7047 on 151 degrees of freedom
Multiple R-squared:  0.6012,    Adjusted R-squared:  0.5986 
F-statistic: 227.6 on 1 and 151 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>We can use these values to express our predicted values for the happiness score as: <span class="math inline">\(\hat{\text{Happiness_score} } = -1.19865 + 0.71774(\text{Log_GDP_Per_Capita_i})\)</span></p>
<section id="interpreting-the-estimates-of-intercept-and-slope-terms" class="level3">
<h3 class="anchored" data-anchor-id="interpreting-the-estimates-of-intercept-and-slope-terms">Interpreting the estimates of intercept and slope terms</h3>
<p>We can interpret the estimates of the intercept and slope term as follows:</p>
<ul>
<li><p>When Log_GDP_Per_Capita is 0, the predicted happiness score is -1.19865. Considering that this is negative, it’s important to note the context that a Log_GDP_Per_Capita of 0 is not practically meaningful in a real-world scenario.</p></li>
<li><p>For a unit increase in the the Log_GDP_Per_Capita, the predicted happiness score increases by 0.71774.</p></li>
</ul>
</section>
</section>
<section id="calculate-and-interpret-the-95-confidence-intervals-for-β0-and-β1." class="level2">
<h2 class="anchored" data-anchor-id="calculate-and-interpret-the-95-confidence-intervals-for-β0-and-β1.">Calculate and interpret the 95% confidence intervals for β0 and β1.</h2>
<p>The confidence intervals tell us:</p>
<ul>
<li><p>We are 95% confident that the true value of <span class="math inline">\(\beta_0\)</span> is between -2.0795752 and -0.3177169.</p></li>
<li><p>We are 95% confident that the true value of <span class="math inline">\(\beta_1\)</span> is between 0.6237481 and 0.8117289.</p></li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                        2.5 %     97.5 %
(Intercept)        -2.0795752 -0.3177169
Log_GDP_Per_Capita  0.6237481  0.8117289</code></pre>
</div>
</div>
</section>
<section id="hypothesis-testing" class="level2">
<h2 class="anchored" data-anchor-id="hypothesis-testing">Hypothesis Testing</h2>
<section id="compute-and-interpret-the-hypothesis-test-h0-β0-0-vs-ha-β0-0." class="level3">
<h3 class="anchored" data-anchor-id="compute-and-interpret-the-hypothesis-test-h0-β0-0-vs-ha-β0-0.">Compute and interpret the hypothesis test H0: β0 = 0 vs Ha: β0 ̸= 0.</h3>
<p>We want to test <span class="math inline">\(H_O: \beta_0 = 0\)</span> vs <span class="math inline">\(H_A: \beta_0 \neq 0\)</span></p>
<p>To do this we need to do a t-test.</p>
<ol type="1">
<li>Calculate: <span class="math inline">\(T = \frac{\hat{\beta_0} - \beta_0 } {\sqrt{\hat{Var(\hat{\beta_0)}}}} = \frac{\hat{\beta}_0-\beta_0}{\sqrt{M S E\left[\frac{1}{n}+\frac{\bar{X}^2}{S_{x x}}\right]}}\)</span></li>
</ol>
<p>We find that the <span class="math inline">\(T=-2.69\)</span> - the same value we observed in the output of the summary function above.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the T statistic</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Happiness_score)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(N<span class="dv">-2</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>VARB0 <span class="ot">=</span> MSE <span class="sc">*</span> (<span class="dv">1</span><span class="sc">/</span>N <span class="sc">+</span> (<span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita)<span class="sc">^</span>(<span class="dv">2</span>)<span class="sc">/</span>SXX))</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>T <span class="ot">=</span> (fit<span class="sc">$</span>coefficients[<span class="dv">1</span>] <span class="sc">-</span> <span class="dv">0</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(VARB0)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
  -2.688393 </code></pre>
</div>
</div>
<p>We can compare <span class="math inline">\({|T|}\)</span> with the <span class="math inline">\(t_{1-\alpha/2, n-2}\)</span> quantile of the t-distribution which we calculate below. As <span class="math inline">\(|-2.69| &gt; 1.975799\)</span> we reject the <span class="math inline">\(H_0.\)</span></p>
<p>At the <span class="math inline">\(\alpha=0.05\)</span> significance level, the evidence is not strong enough to indicate that <span class="math inline">\(\beta_0 = 0.\)</span></p>
<p>This indicates that when the Log_GDP_Per_Capita is at 0, the happiness score is non-zero. In other words, the true coefficient for the intercept <span class="math inline">\(\beta_0\)</span> is non-zero.</p>
<p>Note also that the quantile from the t-distribution is close to 1.96 - this is due to the high number of observations which causes the t-distribution to approach the normal distribution.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qt</span>(<span class="dv">1</span><span class="fl">-0.025</span>, N<span class="dv">-2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.975799</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qnorm</span>(<span class="dv">1</span><span class="fl">-0.025</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.959964</code></pre>
</div>
</div>
<p>Finally, we calculate the p-value. As the p-value is less than 0.05, we reject the null hypothesis and make the same conclusion as with the t-statistic method.</p>
<p>Note that this also agrees with the p-value output of the summary function.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(T), <span class="at">df=</span>N<span class="dv">-2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
0.007986185 </code></pre>
</div>
</div>
</section>
<section id="compute-and-interpret-the-hypothesis-test-h0-β1-0-vs-ha-β1-0." class="level3">
<h3 class="anchored" data-anchor-id="compute-and-interpret-the-hypothesis-test-h0-β1-0-vs-ha-β1-0.">Compute and interpret the hypothesis test H0 : β1 = 0 vs Ha : β1 != 0.</h3>
<p>We want to test <span class="math inline">\(H_O: \beta_1 = 0\)</span> vs <span class="math inline">\(H_A: \beta_1 \neq 0\)</span></p>
<p>To do this we need to do a t-test.</p>
<ol type="1">
<li>Calculate: <span class="math inline">\(T = \frac{\hat{\beta_1} - \beta_1 } {\sqrt{\hat{Var(\hat{\beta_1)}}}} = \frac{\hat{\beta}_1-\beta_1}{\sqrt\frac{M S E}{S_{XX}}}\)</span></li>
</ol>
<p>We find that the <span class="math inline">\(T=15.08778\)</span> - the same value we observed in the output of the summary function above.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the T statistic</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Happiness_score)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(N<span class="dv">-2</span>))</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>VARB1 <span class="ot">=</span> MSE <span class="sc">/</span> SXX</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>T <span class="ot">=</span> (fit<span class="sc">$</span>coefficients[<span class="dv">2</span>] <span class="sc">-</span> <span class="dv">0</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(VARB1)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Log_GDP_Per_Capita 
          15.08778 </code></pre>
</div>
</div>
<p>Comparing <span class="math inline">\({|T|}\)</span> with the <span class="math inline">\(t_{1-\alpha/2, n-2}\)</span> quantile of the t-distribution which we calculate below. As <span class="math inline">\(|15.08778| &gt; 1.975799\)</span> we reject the <span class="math inline">\(H_0.\)</span></p>
<p>At the <span class="math inline">\(\alpha=0.05\)</span> significance level, the evidence is not strong enough to indicate that <span class="math inline">\(\beta_1 = 0.\)</span></p>
<p>This indicates that the true coefficient (the slope term in the model) for Log_GDP_Per_Capita is not equal to 0.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qt</span>(<span class="dv">1</span><span class="fl">-0.025</span>, N<span class="dv">-2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.975799</code></pre>
</div>
</div>
<p>Finally, we calculate the p-value. As the p-value is less than 0.05, we reject the null hypothesis and make the same conclusion as with the t-statistic method. Note that the p-value prints out as 0 due to the extremely small value - in the R summary function this is &lt; 2e-16.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>p_val <span class="ot">=</span> <span class="dv">2</span><span class="sc">*</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(T), <span class="at">df=</span>N<span class="dv">-2</span>))</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p_val)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Log_GDP_Per_Capita 
                 0 </code></pre>
</div>
</div>
</section>
<section id="interpreting-the-f-statistic" class="level3">
<h3 class="anchored" data-anchor-id="interpreting-the-f-statistic">Interpreting the F-statistic</h3>
<p>If we want to test the hypothesis that <span class="math inline">\(H_0: \beta_1=0\)</span>, <span class="math inline">\(H_A: \beta_1\neq 0\)</span> we can use the F-test.</p>
<p>The F-statistic in the summary is found using <span class="math inline">\(F = \frac{MSR}{MSE}\)</span> and, in the context of the simple linear regression model, is distributed with <span class="math inline">\(1, n-2\)</span> degrees of freedom.</p>
<p>Based on the p-value below we reject the null hypothesis that <span class="math inline">\(\beta_1=0\)</span>. Note that this agrees with the conclusions of the t-test for <span class="math inline">\(\beta_1\)</span> above.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Happiness_score ~ Log_GDP_Per_Capita, data = df)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.29256 -0.52524  0.02843  0.57109  1.38802 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        -1.19865    0.44586  -2.688  0.00799 ** 
Log_GDP_Per_Capita  0.71774    0.04757  15.088  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.7047 on 151 degrees of freedom
Multiple R-squared:  0.6012,    Adjusted R-squared:  0.5986 
F-statistic: 227.6 on 1 and 151 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<section id="manually-calculating-the-f-value-and-p-value" class="level4">
<h4 class="anchored" data-anchor-id="manually-calculating-the-f-value-and-p-value">Manually Calculating the F-value and p-value</h4>
<p>We can reproduce the F value ourselves using:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># difference between what we expected and what happened...</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>MSR <span class="ot">=</span> <span class="fu">sum</span>((<span class="fu">fitted</span>(fit) <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Happiness_score))<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="dv">1</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># typical error...</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (N<span class="dv">-2</span>))</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>F <span class="ot">=</span> MSR <span class="sc">/</span> MSE</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 227.6411</code></pre>
</div>
</div>
<p>We can also obtain the p-value using:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">=</span> <span class="fl">0.05</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># one tail so we don't need alpha / 2</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>FDIST <span class="ot">=</span> <span class="fu">qf</span>(<span class="dv">1</span><span class="sc">-</span>alpha, <span class="dv">1</span>, N<span class="dv">-2</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(FDIST)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.903781</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>PVALUE <span class="ot">=</span> <span class="fu">pf</span>(<span class="dv">1</span><span class="sc">-</span>F, <span class="dv">1</span>, N<span class="dv">-2</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(PVALUE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="the-r-squared-value" class="level2">
<h2 class="anchored" data-anchor-id="the-r-squared-value">The R-squared value</h2>
<p>The R-squared value is given by <span class="math inline">\(0.6012\)</span> for this model.</p>
<p>The coefficient of determination <span class="math inline">\(R^2\)</span> represents the proportion of variance in the dependent variable (Happiness_score in this case) that is predictable from the independent variable (Log GDP per capita).</p>
<p>In the context of a linear regression model, <span class="math inline">\(R^2\)</span> is a measure of how well the model fits the data.</p>
<p>We find that approximately 60.12% of the observed variation in the Happiness_score can be explained by the Log GDP per capita. This indicates that the fit is not great but it still has some explanatory power.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>SST <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Happiness_score <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Happiness_score))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>SSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>R2 <span class="ot">=</span> (SST <span class="sc">-</span> SSE) <span class="sc">/</span> SST</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(R2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6012055</code></pre>
</div>
</div>
</section>
<section id="residual-standard-error-rse" class="level2">
<h2 class="anchored" data-anchor-id="residual-standard-error-rse">Residual Standard Error (RSE)</h2>
<p>RSE is a measure of the quality of a linear regression fit.</p>
<p>Due to the presence of error in the model (as stated in model specification), we are not capable of perfectly predicting our response variable (Happiness_score) from the predictor variable (Log GDP per capita).</p>
<p>We can say that the Log GDP per capita accurately predicts the Happiness_score with an error of 0.7047 on average.</p>
<p>Note also that RMSE and RSE are identical in the context of the SLR model.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Happiness_score)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>RMSE <span class="ot">=</span> <span class="fu">sqrt</span>(SSE<span class="sc">/</span>(N<span class="dv">-2</span>))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(RMSE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7047226</code></pre>
</div>
</div>
</section>
<section id="comments-on-the-shape-of-the-95-confidence-intervals-for-the-estimated-values-of-y" class="level2">
<h2 class="anchored" data-anchor-id="comments-on-the-shape-of-the-95-confidence-intervals-for-the-estimated-values-of-y">Comments on the shape of the 95% confidence intervals for the estimated values of Y</h2>
<p>The 95% CI for the estimated values of Y corresponding to the X values is given by: <span class="math display">\[\hat{Y}^* \pm t_{\alpha / 2, n-2} \sqrt{\operatorname{MSE}\left(\frac{1}{n}+\frac{\left(X^*-\bar{X}\right)^2}{S_{X X}}\right)}\]</span></p>
<p>In our plot below, we can observe that the confidence interval is more narrow in the middle and wider towards the lower and upper values of Log GDP per capita.</p>
<p>Due to the high number of observations in the dataset the CI is quite narrow overall. If we had less observations, there would likely be more variability and uncertainty in our estimates, leading to a wider confidence interval.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Log_GDP_Per_Capita)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span> (df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>  )</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> SSE <span class="sc">/</span> (N<span class="dv">-2</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>VAR_Y <span class="ot">=</span> MSE<span class="sc">*</span>(<span class="dv">1</span><span class="sc">/</span>N <span class="sc">+</span> (df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> SXX)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>Yhat <span class="ot">=</span> <span class="fu">fitted</span>(fit)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co"># cbind(Yhat - qt(1-alpha/2, N-2)*sqrt(VAR_Y),Yhat + qt(1-alpha/2, N-2)*sqrt(VAR_Y) )</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, df<span class="sc">$</span>Happiness_score, <span class="at">xlab=</span><span class="st">"Log GDP per capita"</span>, <span class="at">ylab=</span><span class="st">"Happiness_score"</span>)</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat, <span class="at">col=</span><span class="st">"blue"</span>)</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">+</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">-</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="slr_world_happiness_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="comments-on-the-shape-of-the-95-prediction-intervals-for-the-estimated-values-of-y-corresponding-to-the-x-values-in-the-model" class="level2">
<h2 class="anchored" data-anchor-id="comments-on-the-shape-of-the-95-prediction-intervals-for-the-estimated-values-of-y-corresponding-to-the-x-values-in-the-model">Comments on the Shape of the 95% prediction intervals for the estimated values of Y corresponding to the X values in the model</h2>
<p>The 95% prediction interval for the estimated values of Y corresponding to the X values is given by: <span class="math inline">\(\hat{Y}^* \pm t_{\alpha / 2, n-2} \sqrt{\operatorname{MSE}\left(1+\frac{1}{n}+\frac{\left(X^*-\bar{X}\right)^2}{S_{X X}}\right)}\)</span></p>
<p>We note from the plot below that the prediction intervals in green are much wider than the confidence intervals in red. They almost cover the entire range of observed data points. We are 95% sure that <em>new observations</em> will lie within the prediction intervals.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Log_GDP_Per_Capita)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span> (df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>  )</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> SSE <span class="sc">/</span> (N<span class="dv">-2</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># note difference in formula compared to VAR_Y above</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>VAR_E <span class="ot">=</span> MSE<span class="sc">*</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span><span class="sc">/</span>N <span class="sc">+</span> (df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> SXX)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>Yhat <span class="ot">=</span> <span class="fu">fitted</span>(fit)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co"># cbind(Yhat - qt(1-alpha/2, N-2)*sqrt(VAR_E),Yhat + qt(1-alpha/2, N-2)*sqrt(VAR_E) )</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, df<span class="sc">$</span>Happiness_score, <span class="at">xlab=</span><span class="st">"Log GDP per capita"</span>, <span class="at">ylab=</span><span class="st">"Happiness_score"</span>)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat, <span class="at">col=</span><span class="st">"blue"</span>)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">+</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">-</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction intervals</span></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">+</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_E), <span class="at">col=</span><span class="st">"green"</span>)</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">-</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_E), <span class="at">col=</span><span class="st">"green"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="slr_world_happiness_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb56" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "SLR - World Happiness Data"</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># add toc to html</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="an">toc-location:</span><span class="co"> left</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> show</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true # add code tools to html </span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co"># add author and date</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Enda Flynn"</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2024-07-29"</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="an">theme:</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co">  light: cosmo</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">  dark: darkly</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>_Note that you can collapse the code cells by clicking on the code-folding icon in the top right of the code cell._</span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction </span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>The World Happiness Report is an annual study released by the United Nations that investigates individual happiness levels as well as other metrics of well-being. The study provides a happiness score as well as the values of various other indicators for each of the 153 nations.</span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>This is intended to be an exhaustive analysis of the data and the model which will be useful to students and individuals wishing to learn EDA in R or to revise SLR and related concepts. We will begin with an exploratory data analysis to understand the data and the relationship between the variables. We will then fit a simple linear regression model to the data and interpret the results.</span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a><span class="fu"># Exploratory Data Analysis</span></span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a>We can inspect the data in the interactive table below. This will allow us to get a sense of the data and the variables we are working with.</span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false   </span></span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">"data/world_happiness_data.csv"</span>)</span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(df, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">5</span>))</span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Comparing Sub-Saharan Africa and Western Europe</span></span>
<span id="cb56-46"><a href="#cb56-46" aria-hidden="true" tabindex="-1"></a>Check unique regions:</span>
<span id="cb56-47"><a href="#cb56-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>Region)</span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a>Put "Sub-Saharan Africa" and "Western Europe" into their own dataframes for tidy boxplots:</span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-58"><a href="#cb56-58" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-59"><a href="#cb56-59" aria-hidden="true" tabindex="-1"></a>ssa_df <span class="ot">=</span> df[(df<span class="sc">$</span>Region<span class="sc">==</span><span class="st">'Sub-Saharan Africa'</span>),]</span>
<span id="cb56-60"><a href="#cb56-60" aria-hidden="true" tabindex="-1"></a>we_df <span class="ot">=</span>  df[(df<span class="sc">$</span>Region<span class="sc">==</span><span class="st">'Western Europe'</span>),]</span>
<span id="cb56-61"><a href="#cb56-61" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-62"><a href="#cb56-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-63"><a href="#cb56-63" aria-hidden="true" tabindex="-1"></a>Make boxplots and density plots:</span>
<span id="cb56-64"><a href="#cb56-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-67"><a href="#cb56-67" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-68"><a href="#cb56-68" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb56-69"><a href="#cb56-69" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(ssa_df<span class="sc">$</span>Happiness_score, <span class="at">main=</span><span class="st">'Happiness Score Sub-Saharan Africa'</span>)</span>
<span id="cb56-70"><a href="#cb56-70" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(we_df<span class="sc">$</span>Happiness_score, <span class="at">main=</span><span class="st">'Happiness Score West Europe'</span>)</span>
<span id="cb56-71"><a href="#cb56-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-72"><a href="#cb56-72" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(ssa_df<span class="sc">$</span>Happiness_score), <span class="at">main=</span><span class="st">'Happiness Score Sub-Saharan Africa'</span>)</span>
<span id="cb56-73"><a href="#cb56-73" aria-hidden="true" tabindex="-1"></a><span class="fu">polygon</span>(<span class="fu">density</span>(ssa_df<span class="sc">$</span>Happiness_score), <span class="at">col=</span><span class="st">'red'</span>)</span>
<span id="cb56-74"><a href="#cb56-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-75"><a href="#cb56-75" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(we_df<span class="sc">$</span>Happiness_score), <span class="at">main=</span><span class="st">'Happiness Score West Europe'</span>)</span>
<span id="cb56-76"><a href="#cb56-76" aria-hidden="true" tabindex="-1"></a><span class="fu">polygon</span>(<span class="fu">density</span>(we_df<span class="sc">$</span>Happiness_score), <span class="at">col=</span><span class="st">'red'</span>)</span>
<span id="cb56-77"><a href="#cb56-77" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-78"><a href="#cb56-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-79"><a href="#cb56-79" aria-hidden="true" tabindex="-1"></a>Further information on the happiness scores for sub-Saharan Africa and Western Europe respectively:</span>
<span id="cb56-80"><a href="#cb56-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-83"><a href="#cb56-83" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-84"><a href="#cb56-84" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ssa_df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-85"><a href="#cb56-85" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(we_df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-86"><a href="#cb56-86" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-87"><a href="#cb56-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-88"><a href="#cb56-88" aria-hidden="true" tabindex="-1"></a><span class="fu">### Detailed Observations</span></span>
<span id="cb56-89"><a href="#cb56-89" aria-hidden="true" tabindex="-1"></a>From the boxplots, density plots and the summary statistics, we observe a notable difference in the happiness scores of people from Sub-Saharan Africa and Western Europe. Some additional noteworthy observations are that:</span>
<span id="cb56-90"><a href="#cb56-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-91"><a href="#cb56-91" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The median happiness score for Western Europe is 7.094 compared to 4.432 for Sub-Saharan Africa.</span>
<span id="cb56-92"><a href="#cb56-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-93"><a href="#cb56-93" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The minimum happiness score for Western Europe is 5.515 compared to 2.817 for Sub-Saharan Africa.</span>
<span id="cb56-94"><a href="#cb56-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-95"><a href="#cb56-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The maximum happiness score for Western Europe is 7.809 compared to 6.601 for Sub-Saharan Africa.</span>
<span id="cb56-96"><a href="#cb56-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-97"><a href="#cb56-97" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The 25th-percentile happiness score of 6.401 for WE is greater than the maximum score for SSA.</span>
<span id="cb56-98"><a href="#cb56-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-99"><a href="#cb56-99" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>For both Western Europe and Sub-Saharan Africa the mean values are less than the median - this is something we expected from observing the density plots and noticing that they are both left-skewed. From visual inspection of the density plot, the Western Europe distribution is more left skewed and this is reflected in the greater difference between it's mean and median compared to Sub-Saharan Africa.</span>
<span id="cb56-100"><a href="#cb56-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-101"><a href="#cb56-101" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Despite this, it's worth noting that SSA has some degree of right skew also - this indicates that there are some countries in SSA with higher happiness scores than the majority.</span>
<span id="cb56-102"><a href="#cb56-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-103"><a href="#cb56-103" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>There are 39 observations for SSA compared to 21 for WE.</span>
<span id="cb56-104"><a href="#cb56-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-105"><a href="#cb56-105" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Looking at the boxplots, we similarly observe that the distribution for WE is higher overall and more left-skewed than SSA as the lower 'whisker' is longer than the upper. There are no outliers.</span>
<span id="cb56-106"><a href="#cb56-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-107"><a href="#cb56-107" aria-hidden="true" tabindex="-1"></a>We can augment out summary statistics by quantifying the variance in the scores using:</span>
<span id="cb56-108"><a href="#cb56-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-111"><a href="#cb56-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-112"><a href="#cb56-112" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(ssa_df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-113"><a href="#cb56-113" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(we_df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-114"><a href="#cb56-114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-115"><a href="#cb56-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-116"><a href="#cb56-116" aria-hidden="true" tabindex="-1"></a>And getting the IQR using:</span>
<span id="cb56-117"><a href="#cb56-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-120"><a href="#cb56-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-121"><a href="#cb56-121" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(ssa_df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-122"><a href="#cb56-122" aria-hidden="true" tabindex="-1"></a><span class="fu">IQR</span>(we_df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-123"><a href="#cb56-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-124"><a href="#cb56-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-125"><a href="#cb56-125" aria-hidden="true" tabindex="-1"></a>These measures of variance are fairly similar for SSA and WE.</span>
<span id="cb56-126"><a href="#cb56-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-127"><a href="#cb56-127" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analysing Perceptions of Corruption by Region </span></span>
<span id="cb56-128"><a href="#cb56-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-129"><a href="#cb56-129" aria-hidden="true" tabindex="-1"></a>The boxplots show that the perceptions of corruption per region are surprisingly similar. We can distinguish two sets of countries based on this analysis:</span>
<span id="cb56-130"><a href="#cb56-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-131"><a href="#cb56-131" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Those with a relatively lower score: "North America and ANZ" and "Western Europe."</span>
<span id="cb56-132"><a href="#cb56-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-133"><a href="#cb56-133" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Those with a relatively high score: the remaining regions.</span>
<span id="cb56-134"><a href="#cb56-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-135"><a href="#cb56-135" aria-hidden="true" tabindex="-1"></a>Answers to other questions:</span>
<span id="cb56-136"><a href="#cb56-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-137"><a href="#cb56-137" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The region with the highest variability in the perceptions of corruption is Western Europe.</span>
<span id="cb56-138"><a href="#cb56-138" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The region with the highest median value for the variability in perceptions of corruption is Central and Eastern Europe.</span>
<span id="cb56-139"><a href="#cb56-139" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The region with the lowest recorded score for perceptions of corruption is Southeast Asia - this value is an outlier.</span>
<span id="cb56-140"><a href="#cb56-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-143"><a href="#cb56-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-144"><a href="#cb56-144" aria-hidden="true" tabindex="-1"></a><span class="co"># use ggplot2 to rotate labels...</span></span>
<span id="cb56-145"><a href="#cb56-145" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb56-146"><a href="#cb56-146" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> Region, </span>
<span id="cb56-147"><a href="#cb56-147" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> Perceptions_of_corruption,</span>
<span id="cb56-148"><a href="#cb56-148" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> Region)) <span class="sc">+</span></span>
<span id="cb56-149"><a href="#cb56-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb56-150"><a href="#cb56-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb56-151"><a href="#cb56-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-152"><a href="#cb56-152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-153"><a href="#cb56-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-154"><a href="#cb56-154" aria-hidden="true" tabindex="-1"></a><span class="fu">## Using the Correlation and Pairs Plot to Examine the Relationships of the Variables</span></span>
<span id="cb56-155"><a href="#cb56-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-156"><a href="#cb56-156" aria-hidden="true" tabindex="-1"></a>Happiness score and Log_GDP_Per_Capita:</span>
<span id="cb56-157"><a href="#cb56-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-158"><a href="#cb56-158" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In the pairs plot we observe a strong linear relationship between these two variables which is evidenced by the positive correlation of 0.7754. This is the highest correlation with happiness score among the numeric variables.</span>
<span id="cb56-159"><a href="#cb56-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-160"><a href="#cb56-160" aria-hidden="true" tabindex="-1"></a>Happiness score and Social_support:</span>
<span id="cb56-161"><a href="#cb56-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-162"><a href="#cb56-162" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In the pairs plot we observe a strong linear relationship between these two variables which is evidenced by the positive correlation of 0.765 This is the third highest correlation with happiness score among the numeric variables.</span>
<span id="cb56-163"><a href="#cb56-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-164"><a href="#cb56-164" aria-hidden="true" tabindex="-1"></a>Happiness score and Healthy_life_expectancy:</span>
<span id="cb56-165"><a href="#cb56-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-166"><a href="#cb56-166" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In the pairs plot we observe a strong linear relationship between these two variables which is evidenced by the positive correlation of 0.770. This is the second highest correlation with happiness score among the numeric variables.</span>
<span id="cb56-167"><a href="#cb56-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-168"><a href="#cb56-168" aria-hidden="true" tabindex="-1"></a>Happiness score and Freedom_to_make_life_choices:</span>
<span id="cb56-169"><a href="#cb56-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-170"><a href="#cb56-170" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In the pairs plot we observe a weaker linear relationship between these two variables which is evidenced by the positive correlation of 0.5906. This is the fourth highest correlation with happiness score among the numeric variables.</span>
<span id="cb56-171"><a href="#cb56-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-172"><a href="#cb56-172" aria-hidden="true" tabindex="-1"></a>Happiness score and Generosity:</span>
<span id="cb56-173"><a href="#cb56-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-174"><a href="#cb56-174" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In the pairs plot we do not observe a clear linear relationship between these two variables which is evidenced by the low correlation of 0.069. This is the fifth highest correlation with happiness score among the numeric variables.</span>
<span id="cb56-175"><a href="#cb56-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-176"><a href="#cb56-176" aria-hidden="true" tabindex="-1"></a>Happiness score and Perceptions_of_corruption:</span>
<span id="cb56-177"><a href="#cb56-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-178"><a href="#cb56-178" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In the pairs plot we do not observe a slight negative linear relationship between these two variables which is also reflected in the negative correlation of -0.4183. This is the only negative correlation with happiness score among the numeric variables.</span>
<span id="cb56-179"><a href="#cb56-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-182"><a href="#cb56-182" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-183"><a href="#cb56-183" aria-hidden="true" tabindex="-1"></a><span class="co"># get numeric columns</span></span>
<span id="cb56-184"><a href="#cb56-184" aria-hidden="true" tabindex="-1"></a>nums <span class="ot">=</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(df, is.numeric), <span class="at">use.names =</span> <span class="cn">FALSE</span>)  </span>
<span id="cb56-185"><a href="#cb56-185" aria-hidden="true" tabindex="-1"></a>pairs_df <span class="ot">=</span> df[, nums]</span>
<span id="cb56-186"><a href="#cb56-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-187"><a href="#cb56-187" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(pairs_df)</span>
<span id="cb56-188"><a href="#cb56-188" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-189"><a href="#cb56-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-192"><a href="#cb56-192" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-193"><a href="#cb56-193" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(pairs_df)</span>
<span id="cb56-194"><a href="#cb56-194" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-195"><a href="#cb56-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-196"><a href="#cb56-196" aria-hidden="true" tabindex="-1"></a><span class="fu">### Neater Option</span></span>
<span id="cb56-197"><a href="#cb56-197" aria-hidden="true" tabindex="-1"></a>Note that we can also use the <span class="in">`corrplot`</span> package to visualise the correlation matrix for a neater output:</span>
<span id="cb56-198"><a href="#cb56-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-201"><a href="#cb56-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-202"><a href="#cb56-202" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(pairs_df)</span>
<span id="cb56-203"><a href="#cb56-203" aria-hidden="true" tabindex="-1"></a><span class="co"># visualise the correlation matrix</span></span>
<span id="cb56-204"><a href="#cb56-204" aria-hidden="true" tabindex="-1"></a><span class="fu">heatmap</span>(cor_matrix, <span class="at">col =</span> <span class="fu">colorRampPalette</span>(<span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"white"</span>, <span class="st">"red"</span>))(<span class="dv">100</span>), </span>
<span id="cb56-205"><a href="#cb56-205" aria-hidden="true" tabindex="-1"></a>        <span class="at">symm =</span> <span class="cn">TRUE</span>, <span class="at">margins =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb56-206"><a href="#cb56-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-207"><a href="#cb56-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-208"><a href="#cb56-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-209"><a href="#cb56-209" aria-hidden="true" tabindex="-1"></a><span class="fu">## Which Predictor Variable for Happiness Score as Response Variable?</span></span>
<span id="cb56-210"><a href="#cb56-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-211"><a href="#cb56-211" aria-hidden="true" tabindex="-1"></a>Based on the results so far, I would expect the Log_GDP_Per_Capita to be a better predictor variable in a regression model than Freedom_to_make_life_choices. The reason I select this is because:</span>
<span id="cb56-212"><a href="#cb56-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-213"><a href="#cb56-213" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The correlation for Log_GDP_Per_Capita and the Happiness_score is 0.775 compared to 0.591 for Freedom_to_make_life_choices and the Happiness_score which indicates a much stronger linear relationship.</span>
<span id="cb56-214"><a href="#cb56-214" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>From observation of the pairs plot we observe less variability in the relationship between Log_GDP_Per_Capita and the Happiness_score compared to Freedom_to_make_life_choices and the Happiness_score.</span>
<span id="cb56-215"><a href="#cb56-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-216"><a href="#cb56-216" aria-hidden="true" tabindex="-1"></a><span class="fu"># Regression Modelling</span></span>
<span id="cb56-217"><a href="#cb56-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-218"><a href="#cb56-218" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fitting a simple linear regression model </span></span>
<span id="cb56-219"><a href="#cb56-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-220"><a href="#cb56-220" aria-hidden="true" tabindex="-1"></a>The mathematical statement of the simple linear regression model is given by $$</span>
<span id="cb56-221"><a href="#cb56-221" aria-hidden="true" tabindex="-1"></a>Y_i = \beta_0 + \beta_1X_i + \epsilon_i,\quad i =1, ..., n,</span>
<span id="cb56-222"><a href="#cb56-222" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb56-223"><a href="#cb56-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-224"><a href="#cb56-224" aria-hidden="true" tabindex="-1"></a>where $\beta_0$, $\beta_1$ are parameters for the intercept and slope of the model respectively - these are fixed, unknown constants which we estimate with the statistics $\hat{\beta_0}$ and $\hat{\beta_1}$. The remaining values $Y_i, X_i$ and $\epsilon_i$ are the values of the dependent/response variable, the independent/predictor variable, and the error for observation $i.$</span>
<span id="cb56-225"><a href="#cb56-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-226"><a href="#cb56-226" aria-hidden="true" tabindex="-1"></a>The predictions of our model will be given by $$</span>
<span id="cb56-227"><a href="#cb56-227" aria-hidden="true" tabindex="-1"></a>\hat{Y_i} = \hat{\beta_0} + \hat{\beta_1}X_i,\quad i =1, ..., n,</span>
<span id="cb56-228"><a href="#cb56-228" aria-hidden="true" tabindex="-1"></a>$$ where:</span>
<span id="cb56-229"><a href="#cb56-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-230"><a href="#cb56-230" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>$\hat{Y_i}$ is the predicted Happiness_score for observation $i$.</span>
<span id="cb56-231"><a href="#cb56-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-232"><a href="#cb56-232" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>$\hat{\beta_0}$ is the estimated intercept term - it is the model's predicted happiness score when $X=0$ (i.e., the value of the dependent variable when the independent variable is 0).</span>
<span id="cb56-233"><a href="#cb56-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-234"><a href="#cb56-234" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>$\hat{\beta_1}$ is the slope of the regression line - in our model it is the predicted increase in the happiness score for a one unit increase in Log_GDP_Per_Capita.</span>
<span id="cb56-235"><a href="#cb56-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-238"><a href="#cb56-238" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-239"><a href="#cb56-239" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">=</span> <span class="fu">lm</span>(Happiness_score <span class="sc">~</span> Log_GDP_Per_Capita, <span class="at">data=</span>df)</span>
<span id="cb56-240"><a href="#cb56-240" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span>
<span id="cb56-241"><a href="#cb56-241" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-242"><a href="#cb56-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-243"><a href="#cb56-243" aria-hidden="true" tabindex="-1"></a>We can use these values to express our predicted values for the happiness score as: </span>
<span id="cb56-244"><a href="#cb56-244" aria-hidden="true" tabindex="-1"></a>$\hat{\text{Happiness_score} } = -1.19865 + 0.71774(\text{Log_GDP_Per_Capita_i})$</span>
<span id="cb56-245"><a href="#cb56-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-246"><a href="#cb56-246" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interpreting the estimates of intercept and slope terms</span></span>
<span id="cb56-247"><a href="#cb56-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-248"><a href="#cb56-248" aria-hidden="true" tabindex="-1"></a>We can interpret the estimates of the intercept and slope term as follows:</span>
<span id="cb56-249"><a href="#cb56-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-250"><a href="#cb56-250" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>When Log_GDP_Per_Capita is 0, the predicted happiness score is -1.19865. Considering that this is negative, it's important to note the context that a Log_GDP_Per_Capita of 0 is not practically meaningful in a real-world scenario.</span>
<span id="cb56-251"><a href="#cb56-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-252"><a href="#cb56-252" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>For a unit increase in the the Log_GDP_Per_Capita, the predicted happiness score increases by 0.71774.</span>
<span id="cb56-253"><a href="#cb56-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-254"><a href="#cb56-254" aria-hidden="true" tabindex="-1"></a><span class="fu">## Calculate and interpret the 95% confidence intervals for β0 and β1.</span></span>
<span id="cb56-255"><a href="#cb56-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-256"><a href="#cb56-256" aria-hidden="true" tabindex="-1"></a>The confidence intervals tell us:</span>
<span id="cb56-257"><a href="#cb56-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-258"><a href="#cb56-258" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>We are 95% confident that the true value of $\beta_0$ is between -2.0795752 and -0.3177169.</span>
<span id="cb56-259"><a href="#cb56-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-260"><a href="#cb56-260" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>We are 95% confident that the true value of $\beta_1$ is between 0.6237481 and 0.8117289.</span>
<span id="cb56-261"><a href="#cb56-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-264"><a href="#cb56-264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-265"><a href="#cb56-265" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(fit)</span>
<span id="cb56-266"><a href="#cb56-266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-267"><a href="#cb56-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-268"><a href="#cb56-268" aria-hidden="true" tabindex="-1"></a><span class="fu">## Hypothesis Testing</span></span>
<span id="cb56-269"><a href="#cb56-269" aria-hidden="true" tabindex="-1"></a><span class="fu">### Compute and interpret the hypothesis test H0: β0 = 0 vs Ha: β0 ̸= 0. </span></span>
<span id="cb56-270"><a href="#cb56-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-271"><a href="#cb56-271" aria-hidden="true" tabindex="-1"></a>We want to test $H_O: \beta_0 = 0$ vs $H_A: \beta_0 \neq 0$</span>
<span id="cb56-272"><a href="#cb56-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-273"><a href="#cb56-273" aria-hidden="true" tabindex="-1"></a>To do this we need to do a t-test.</span>
<span id="cb56-274"><a href="#cb56-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-275"><a href="#cb56-275" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Calculate: $T = \frac{\hat{\beta_0} - \beta_0 } {\sqrt{\hat{Var(\hat{\beta_0)}}}} = \frac{\hat{\beta}_0-\beta_0}{\sqrt{M S E\left[\frac{1}{n}+\frac{\bar{X}^2}{S_{x x}}\right]}}$</span>
<span id="cb56-276"><a href="#cb56-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-277"><a href="#cb56-277" aria-hidden="true" tabindex="-1"></a>We find that the $T=-2.69$ - the same value we observed in the output of the summary function above.</span>
<span id="cb56-278"><a href="#cb56-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-281"><a href="#cb56-281" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-282"><a href="#cb56-282" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the T statistic</span></span>
<span id="cb56-283"><a href="#cb56-283" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-284"><a href="#cb56-284" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(N<span class="dv">-2</span>))</span>
<span id="cb56-285"><a href="#cb56-285" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb56-286"><a href="#cb56-286" aria-hidden="true" tabindex="-1"></a>VARB0 <span class="ot">=</span> MSE <span class="sc">*</span> (<span class="dv">1</span><span class="sc">/</span>N <span class="sc">+</span> (<span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita)<span class="sc">^</span>(<span class="dv">2</span>)<span class="sc">/</span>SXX))</span>
<span id="cb56-287"><a href="#cb56-287" aria-hidden="true" tabindex="-1"></a>T <span class="ot">=</span> (fit<span class="sc">$</span>coefficients[<span class="dv">1</span>] <span class="sc">-</span> <span class="dv">0</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(VARB0)</span>
<span id="cb56-288"><a href="#cb56-288" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(T)</span>
<span id="cb56-289"><a href="#cb56-289" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-290"><a href="#cb56-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-291"><a href="#cb56-291" aria-hidden="true" tabindex="-1"></a>We can compare ${|T|}$ with the $t_{1-\alpha/2, n-2}$ quantile of the t-distribution which we calculate below. As $|-2.69| &gt; 1.975799$ we reject the $H_0.$</span>
<span id="cb56-292"><a href="#cb56-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-293"><a href="#cb56-293" aria-hidden="true" tabindex="-1"></a>At the $\alpha=0.05$ significance level, the evidence is not strong enough to indicate that $\beta_0 = 0.$</span>
<span id="cb56-294"><a href="#cb56-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-295"><a href="#cb56-295" aria-hidden="true" tabindex="-1"></a>This indicates that when the Log_GDP_Per_Capita is at 0, the happiness score is non-zero. In other words, the true coefficient for the intercept $\beta_0$ is non-zero.</span>
<span id="cb56-296"><a href="#cb56-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-297"><a href="#cb56-297" aria-hidden="true" tabindex="-1"></a>Note also that the quantile from the t-distribution is close to 1.96 - this is due to the high number of observations which causes the t-distribution to approach the normal distribution.</span>
<span id="cb56-298"><a href="#cb56-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-301"><a href="#cb56-301" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-302"><a href="#cb56-302" aria-hidden="true" tabindex="-1"></a><span class="fu">qt</span>(<span class="dv">1</span><span class="fl">-0.025</span>, N<span class="dv">-2</span>)</span>
<span id="cb56-303"><a href="#cb56-303" aria-hidden="true" tabindex="-1"></a><span class="fu">qnorm</span>(<span class="dv">1</span><span class="fl">-0.025</span>)</span>
<span id="cb56-304"><a href="#cb56-304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-305"><a href="#cb56-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-306"><a href="#cb56-306" aria-hidden="true" tabindex="-1"></a>Finally, we calculate the p-value. As the p-value is less than 0.05, we reject the null hypothesis and make the same conclusion as with the t-statistic method.</span>
<span id="cb56-307"><a href="#cb56-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-308"><a href="#cb56-308" aria-hidden="true" tabindex="-1"></a>Note that this also agrees with the p-value output of the summary function.</span>
<span id="cb56-309"><a href="#cb56-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-312"><a href="#cb56-312" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-313"><a href="#cb56-313" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(T), <span class="at">df=</span>N<span class="dv">-2</span>))</span>
<span id="cb56-314"><a href="#cb56-314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-315"><a href="#cb56-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-316"><a href="#cb56-316" aria-hidden="true" tabindex="-1"></a><span class="fu">### Compute and interpret the hypothesis test H0 : β1 = 0 vs Ha : β1 != 0. </span></span>
<span id="cb56-317"><a href="#cb56-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-318"><a href="#cb56-318" aria-hidden="true" tabindex="-1"></a>We want to test $H_O: \beta_1 = 0$ vs $H_A: \beta_1 \neq 0$</span>
<span id="cb56-319"><a href="#cb56-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-320"><a href="#cb56-320" aria-hidden="true" tabindex="-1"></a>To do this we need to do a t-test.</span>
<span id="cb56-321"><a href="#cb56-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-322"><a href="#cb56-322" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Calculate: $T = \frac{\hat{\beta_1} - \beta_1 } {\sqrt{\hat{Var(\hat{\beta_1)}}}} = \frac{\hat{\beta}_1-\beta_1}{\sqrt\frac{M S E}{S_{XX}}}$</span>
<span id="cb56-323"><a href="#cb56-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-324"><a href="#cb56-324" aria-hidden="true" tabindex="-1"></a>We find that the $T=15.08778$ - the same value we observed in the output of the summary function above.</span>
<span id="cb56-325"><a href="#cb56-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-328"><a href="#cb56-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-329"><a href="#cb56-329" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the T statistic</span></span>
<span id="cb56-330"><a href="#cb56-330" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-331"><a href="#cb56-331" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(N<span class="dv">-2</span>))</span>
<span id="cb56-332"><a href="#cb56-332" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb56-333"><a href="#cb56-333" aria-hidden="true" tabindex="-1"></a>VARB1 <span class="ot">=</span> MSE <span class="sc">/</span> SXX</span>
<span id="cb56-334"><a href="#cb56-334" aria-hidden="true" tabindex="-1"></a>T <span class="ot">=</span> (fit<span class="sc">$</span>coefficients[<span class="dv">2</span>] <span class="sc">-</span> <span class="dv">0</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(VARB1)</span>
<span id="cb56-335"><a href="#cb56-335" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(T)</span>
<span id="cb56-336"><a href="#cb56-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-337"><a href="#cb56-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-338"><a href="#cb56-338" aria-hidden="true" tabindex="-1"></a>Comparing ${|T|}$ with the $t_{1-\alpha/2, n-2}$ quantile of the t-distribution which we calculate below. As $|15.08778| &gt; 1.975799$ we reject the $H_0.$</span>
<span id="cb56-339"><a href="#cb56-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-340"><a href="#cb56-340" aria-hidden="true" tabindex="-1"></a>At the $\alpha=0.05$ significance level, the evidence is not strong enough to indicate that $\beta_1 = 0.$</span>
<span id="cb56-341"><a href="#cb56-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-342"><a href="#cb56-342" aria-hidden="true" tabindex="-1"></a>This indicates that the true coefficient (the slope term in the model) for Log_GDP_Per_Capita is not equal to 0.</span>
<span id="cb56-343"><a href="#cb56-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-346"><a href="#cb56-346" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-347"><a href="#cb56-347" aria-hidden="true" tabindex="-1"></a><span class="fu">qt</span>(<span class="dv">1</span><span class="fl">-0.025</span>, N<span class="dv">-2</span>)</span>
<span id="cb56-348"><a href="#cb56-348" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-349"><a href="#cb56-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-350"><a href="#cb56-350" aria-hidden="true" tabindex="-1"></a>Finally, we calculate the p-value. As the p-value is less than 0.05, we reject the null hypothesis and make the same conclusion as with the t-statistic method. Note that the p-value prints out as 0 due to the extremely small value - in the R summary function this is <span class="sc">\&lt;</span> 2e-16.</span>
<span id="cb56-351"><a href="#cb56-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-354"><a href="#cb56-354" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-355"><a href="#cb56-355" aria-hidden="true" tabindex="-1"></a>p_val <span class="ot">=</span> <span class="dv">2</span><span class="sc">*</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(T), <span class="at">df=</span>N<span class="dv">-2</span>))</span>
<span id="cb56-356"><a href="#cb56-356" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p_val)</span>
<span id="cb56-357"><a href="#cb56-357" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-358"><a href="#cb56-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-359"><a href="#cb56-359" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interpreting the F-statistic</span></span>
<span id="cb56-360"><a href="#cb56-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-361"><a href="#cb56-361" aria-hidden="true" tabindex="-1"></a>If we want to test the hypothesis that $H_0: \beta_1=0$, $H_A: \beta_1\neq 0$ we can use the F-test.</span>
<span id="cb56-362"><a href="#cb56-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-363"><a href="#cb56-363" aria-hidden="true" tabindex="-1"></a>The F-statistic in the summary is found using $F = \frac{MSR}{MSE}$ and, in the context of the simple linear regression model, is distributed with $1, n-2$ degrees of freedom.</span>
<span id="cb56-364"><a href="#cb56-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-365"><a href="#cb56-365" aria-hidden="true" tabindex="-1"></a>Based on the p-value below we reject the null hypothesis that $\beta_1=0$. Note that this agrees with the conclusions of the t-test for $\beta_1$ above.</span>
<span id="cb56-366"><a href="#cb56-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-369"><a href="#cb56-369" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-370"><a href="#cb56-370" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span>
<span id="cb56-371"><a href="#cb56-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-372"><a href="#cb56-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-373"><a href="#cb56-373" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Manually Calculating the F-value and p-value</span></span>
<span id="cb56-374"><a href="#cb56-374" aria-hidden="true" tabindex="-1"></a>We can reproduce the F value ourselves using:</span>
<span id="cb56-375"><a href="#cb56-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-378"><a href="#cb56-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-379"><a href="#cb56-379" aria-hidden="true" tabindex="-1"></a><span class="co"># difference between what we expected and what happened...</span></span>
<span id="cb56-380"><a href="#cb56-380" aria-hidden="true" tabindex="-1"></a>MSR <span class="ot">=</span> <span class="fu">sum</span>((<span class="fu">fitted</span>(fit) <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Happiness_score))<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="dv">1</span> </span>
<span id="cb56-381"><a href="#cb56-381" aria-hidden="true" tabindex="-1"></a><span class="co"># typical error...</span></span>
<span id="cb56-382"><a href="#cb56-382" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (N<span class="dv">-2</span>))</span>
<span id="cb56-383"><a href="#cb56-383" aria-hidden="true" tabindex="-1"></a>F <span class="ot">=</span> MSR <span class="sc">/</span> MSE</span>
<span id="cb56-384"><a href="#cb56-384" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(F)</span>
<span id="cb56-385"><a href="#cb56-385" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-386"><a href="#cb56-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-387"><a href="#cb56-387" aria-hidden="true" tabindex="-1"></a>We can also obtain the p-value using:</span>
<span id="cb56-388"><a href="#cb56-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-391"><a href="#cb56-391" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-392"><a href="#cb56-392" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">=</span> <span class="fl">0.05</span></span>
<span id="cb56-393"><a href="#cb56-393" aria-hidden="true" tabindex="-1"></a><span class="co"># one tail so we don't need alpha / 2</span></span>
<span id="cb56-394"><a href="#cb56-394" aria-hidden="true" tabindex="-1"></a>FDIST <span class="ot">=</span> <span class="fu">qf</span>(<span class="dv">1</span><span class="sc">-</span>alpha, <span class="dv">1</span>, N<span class="dv">-2</span>)</span>
<span id="cb56-395"><a href="#cb56-395" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(FDIST)</span>
<span id="cb56-396"><a href="#cb56-396" aria-hidden="true" tabindex="-1"></a>PVALUE <span class="ot">=</span> <span class="fu">pf</span>(<span class="dv">1</span><span class="sc">-</span>F, <span class="dv">1</span>, N<span class="dv">-2</span>)</span>
<span id="cb56-397"><a href="#cb56-397" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(PVALUE)</span>
<span id="cb56-398"><a href="#cb56-398" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-399"><a href="#cb56-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-400"><a href="#cb56-400" aria-hidden="true" tabindex="-1"></a><span class="fu">## The R-squared value </span></span>
<span id="cb56-401"><a href="#cb56-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-402"><a href="#cb56-402" aria-hidden="true" tabindex="-1"></a>The R-squared value is given by $0.6012$ for this model.</span>
<span id="cb56-403"><a href="#cb56-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-404"><a href="#cb56-404" aria-hidden="true" tabindex="-1"></a>The coefficient of determination $R^2$ represents the proportion of variance in the dependent variable (Happiness_score in this case) that is predictable from the independent variable (Log GDP per capita).</span>
<span id="cb56-405"><a href="#cb56-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-406"><a href="#cb56-406" aria-hidden="true" tabindex="-1"></a>In the context of a linear regression model, $R^2$ is a measure of how well the model fits the data.</span>
<span id="cb56-407"><a href="#cb56-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-408"><a href="#cb56-408" aria-hidden="true" tabindex="-1"></a>We find that approximately 60.12% of the observed variation in the Happiness_score can be explained by the Log GDP per capita. This indicates that the fit is not great but it still has some explanatory power.</span>
<span id="cb56-409"><a href="#cb56-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-412"><a href="#cb56-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-413"><a href="#cb56-413" aria-hidden="true" tabindex="-1"></a>SST <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Happiness_score <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Happiness_score))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb56-414"><a href="#cb56-414" aria-hidden="true" tabindex="-1"></a>SSE <span class="ot">=</span> <span class="fu">sum</span>(fit<span class="sc">$</span>residuals<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb56-415"><a href="#cb56-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-416"><a href="#cb56-416" aria-hidden="true" tabindex="-1"></a>R2 <span class="ot">=</span> (SST <span class="sc">-</span> SSE) <span class="sc">/</span> SST</span>
<span id="cb56-417"><a href="#cb56-417" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(R2)</span>
<span id="cb56-418"><a href="#cb56-418" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-419"><a href="#cb56-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-420"><a href="#cb56-420" aria-hidden="true" tabindex="-1"></a><span class="fu">## Residual Standard Error (RSE)</span></span>
<span id="cb56-421"><a href="#cb56-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-422"><a href="#cb56-422" aria-hidden="true" tabindex="-1"></a>RSE is a measure of the quality of a linear regression fit.</span>
<span id="cb56-423"><a href="#cb56-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-424"><a href="#cb56-424" aria-hidden="true" tabindex="-1"></a>Due to the presence of error in the model (as stated in model specification), we are not capable of perfectly predicting our response variable (Happiness_score) from the predictor variable (Log GDP per capita).</span>
<span id="cb56-425"><a href="#cb56-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-426"><a href="#cb56-426" aria-hidden="true" tabindex="-1"></a>We can say that the Log GDP per capita accurately predicts the Happiness_score with an error of 0.7047 on average.</span>
<span id="cb56-427"><a href="#cb56-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-428"><a href="#cb56-428" aria-hidden="true" tabindex="-1"></a>Note also that RMSE and RSE are identical in the context of the SLR model.</span>
<span id="cb56-429"><a href="#cb56-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-432"><a href="#cb56-432" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-433"><a href="#cb56-433" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Happiness_score)</span>
<span id="cb56-434"><a href="#cb56-434" aria-hidden="true" tabindex="-1"></a>RMSE <span class="ot">=</span> <span class="fu">sqrt</span>(SSE<span class="sc">/</span>(N<span class="dv">-2</span>))</span>
<span id="cb56-435"><a href="#cb56-435" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(RMSE)</span>
<span id="cb56-436"><a href="#cb56-436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-437"><a href="#cb56-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-438"><a href="#cb56-438" aria-hidden="true" tabindex="-1"></a><span class="fu">## Comments on the shape of the 95% confidence intervals for the estimated values of Y</span></span>
<span id="cb56-439"><a href="#cb56-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-440"><a href="#cb56-440" aria-hidden="true" tabindex="-1"></a>The 95% CI for the estimated values of Y corresponding to the X values is given by: </span>
<span id="cb56-441"><a href="#cb56-441" aria-hidden="true" tabindex="-1"></a>$$\hat{Y}^* \pm t_{\alpha / 2, n-2} \sqrt{\operatorname{MSE}\left(\frac{1}{n}+\frac{\left(X^*-\bar{X}\right)^2}{S_{X X}}\right)}$$</span>
<span id="cb56-442"><a href="#cb56-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-443"><a href="#cb56-443" aria-hidden="true" tabindex="-1"></a>In our plot below, we can observe that the confidence interval is more narrow in the middle and wider towards the lower and upper values of Log GDP per capita.</span>
<span id="cb56-444"><a href="#cb56-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-445"><a href="#cb56-445" aria-hidden="true" tabindex="-1"></a>Due to the high number of observations in the dataset the CI is quite narrow overall. If we had less observations, there would likely be more variability and uncertainty in our estimates, leading to a wider confidence interval.</span>
<span id="cb56-446"><a href="#cb56-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-449"><a href="#cb56-449" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-450"><a href="#cb56-450" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Log_GDP_Per_Capita)</span>
<span id="cb56-451"><a href="#cb56-451" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span> (df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>  )</span>
<span id="cb56-452"><a href="#cb56-452" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> SSE <span class="sc">/</span> (N<span class="dv">-2</span>)</span>
<span id="cb56-453"><a href="#cb56-453" aria-hidden="true" tabindex="-1"></a>VAR_Y <span class="ot">=</span> MSE<span class="sc">*</span>(<span class="dv">1</span><span class="sc">/</span>N <span class="sc">+</span> (df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> SXX)</span>
<span id="cb56-454"><a href="#cb56-454" aria-hidden="true" tabindex="-1"></a>Yhat <span class="ot">=</span> <span class="fu">fitted</span>(fit)</span>
<span id="cb56-455"><a href="#cb56-455" aria-hidden="true" tabindex="-1"></a><span class="co"># cbind(Yhat - qt(1-alpha/2, N-2)*sqrt(VAR_Y),Yhat + qt(1-alpha/2, N-2)*sqrt(VAR_Y) )</span></span>
<span id="cb56-456"><a href="#cb56-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-457"><a href="#cb56-457" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, df<span class="sc">$</span>Happiness_score, <span class="at">xlab=</span><span class="st">"Log GDP per capita"</span>, <span class="at">ylab=</span><span class="st">"Happiness_score"</span>)</span>
<span id="cb56-458"><a href="#cb56-458" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat, <span class="at">col=</span><span class="st">"blue"</span>)</span>
<span id="cb56-459"><a href="#cb56-459" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">+</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb56-460"><a href="#cb56-460" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">-</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb56-461"><a href="#cb56-461" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-462"><a href="#cb56-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-463"><a href="#cb56-463" aria-hidden="true" tabindex="-1"></a><span class="fu">## Comments on the Shape of the 95% prediction intervals for the estimated values of Y corresponding to the X values in the model</span></span>
<span id="cb56-464"><a href="#cb56-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-465"><a href="#cb56-465" aria-hidden="true" tabindex="-1"></a>The 95% prediction interval for the estimated values of Y corresponding to the X values is given by: $\hat{Y}^* \pm t_{\alpha / 2, n-2} \sqrt{\operatorname{MSE}\left(1+\frac{1}{n}+\frac{\left(X^*-\bar{X}\right)^2}{S_{X X}}\right)}$</span>
<span id="cb56-466"><a href="#cb56-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-467"><a href="#cb56-467" aria-hidden="true" tabindex="-1"></a>We note from the plot below that the prediction intervals in green are much wider than the confidence intervals in red. They almost cover the entire range of observed data points. We are 95% sure that *new observations* will lie within the prediction intervals.</span>
<span id="cb56-468"><a href="#cb56-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-471"><a href="#cb56-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-472"><a href="#cb56-472" aria-hidden="true" tabindex="-1"></a>N <span class="ot">=</span> <span class="fu">length</span>(df<span class="sc">$</span>Log_GDP_Per_Capita)</span>
<span id="cb56-473"><a href="#cb56-473" aria-hidden="true" tabindex="-1"></a>SXX <span class="ot">=</span> <span class="fu">sum</span>((df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span> (df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span>  )</span>
<span id="cb56-474"><a href="#cb56-474" aria-hidden="true" tabindex="-1"></a>MSE <span class="ot">=</span> SSE <span class="sc">/</span> (N<span class="dv">-2</span>)</span>
<span id="cb56-475"><a href="#cb56-475" aria-hidden="true" tabindex="-1"></a><span class="co"># note difference in formula compared to VAR_Y above</span></span>
<span id="cb56-476"><a href="#cb56-476" aria-hidden="true" tabindex="-1"></a>VAR_E <span class="ot">=</span> MSE<span class="sc">*</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span><span class="sc">/</span>N <span class="sc">+</span> (df<span class="sc">$</span>Log_GDP_Per_Capita <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>Log_GDP_Per_Capita))<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> SXX)</span>
<span id="cb56-477"><a href="#cb56-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-478"><a href="#cb56-478" aria-hidden="true" tabindex="-1"></a>Yhat <span class="ot">=</span> <span class="fu">fitted</span>(fit)</span>
<span id="cb56-479"><a href="#cb56-479" aria-hidden="true" tabindex="-1"></a><span class="co"># cbind(Yhat - qt(1-alpha/2, N-2)*sqrt(VAR_E),Yhat + qt(1-alpha/2, N-2)*sqrt(VAR_E) )</span></span>
<span id="cb56-480"><a href="#cb56-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-481"><a href="#cb56-481" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, df<span class="sc">$</span>Happiness_score, <span class="at">xlab=</span><span class="st">"Log GDP per capita"</span>, <span class="at">ylab=</span><span class="st">"Happiness_score"</span>)</span>
<span id="cb56-482"><a href="#cb56-482" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat, <span class="at">col=</span><span class="st">"blue"</span>)</span>
<span id="cb56-483"><a href="#cb56-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-484"><a href="#cb56-484" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb56-485"><a href="#cb56-485" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">+</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb56-486"><a href="#cb56-486" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">-</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_Y), <span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb56-487"><a href="#cb56-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-488"><a href="#cb56-488" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction intervals</span></span>
<span id="cb56-489"><a href="#cb56-489" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">+</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_E), <span class="at">col=</span><span class="st">"green"</span>)</span>
<span id="cb56-490"><a href="#cb56-490" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>Log_GDP_Per_Capita, Yhat <span class="sc">-</span> <span class="fu">qt</span>(<span class="dv">1</span><span class="sc">-</span>alpha<span class="sc">/</span><span class="dv">2</span>, N<span class="dv">-2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(VAR_E), <span class="at">col=</span><span class="st">"green"</span>)</span>
<span id="cb56-491"><a href="#cb56-491" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>